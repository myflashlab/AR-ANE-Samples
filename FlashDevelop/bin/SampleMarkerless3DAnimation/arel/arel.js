var arelTEST=false;var arel={readyCallback:undefined,sceneReadyCallback:undefined,readyCalled:false,sceneReadyCalled:false,isReady:false,sceneIsReady:false,commandQueue:[],commandCachePerObject:{},callbackMethodIterator:0,objectIdIterator:0,Constants:{ANCHOR_NONE:0<<0,ANCHOR_LEFT:1<<0,ANCHOR_RIGHT:1<<1,ANCHOR_BOTTOM:1<<2,ANCHOR_TOP:1<<3,ANCHOR_CENTER_H:1<<4,ANCHOR_CENTER_V:1<<5,ANCHOR_TL:1<<0|1<<3,ANCHOR_TC:1<<3|1<<4,ANCHOR_TR:1<<3|1<<1,ANCHOR_CL:1<<5|1<<0,ANCHOR_CC:1<<4|1<<5,ANCHOR_CR:1<<5|1<<1,ANCHOR_BL:1<<2|1<<0,ANCHOR_BC:1<<2|1<<4,ANCHOR_BR:1<<2|1<<1,FLAG_NONE:0<<0,FLAG_IGNORE_ROTATION:1<<0,FLAG_IGNORE_ANIMATIONS:1<<1,FLAG_IGNORE_SCREEN_RESOLUTION:1<<2,FLAG_MATCH_DISPLAY:1<<2,FLAG_AUTOSCALE:1<<3,PLAYBACK_STATUS_ERROR:0,PLAYBACK_STATUS_PLAYING:1,PLAYBACK_STATUS_PAUSED:2,PLAYBACK_STATUS_STOPPED:3,GESTURE_DRAG:"GESTURE_DRAG",GESTURE_PINCH:"GESTURE_PINCH",GESTURE_ROTATE:"GESTURE_ROTATE",GESTURE_PINCHROTATE:"GESTURE_ROTATE|GESTURE_PINCH",GESTURE_DRAGROTATE:"GESTURE_DRAG|GESTURE_ROTATE",GESTURE_DRAGPINCH:"GESTURE_DRAG|GESTURE_PINCH",GESTURE_ALL:"GESTURE_DRAG|GESTURE_PINCH|GESTURE_ROTATE"},Plugin:{},AnimationType:{ALL:"EAT_ALL",MODEL_ONLY:"EAT_MODEL_ONLY",CUSTOM_ONLY:"EAT_CUSTOM_ONLY"},CameraType:{ALL:"ECT_ALL",RENDERING:6,RENDERING_MONO:"ECT_RENDERING_MONO",RENDERING_LEFT:2,RENDERING_STEREO_LEFT:"ECT_RENDERING_STEREO_LEFT",RENDERING_RIGHT:4,RENDERING_STEREO_RIGHT:"ECT_RENDERING_STEREO_RIGHT",TRACKING:"ECT_TRACKING"},Config:{OBJECT_INTERFACE_CATEGORY:"object",OBJECT_EVENT_CATEGORY:"objectevent",OBJECT_POI:"poi",OBJECT_MODEL3D:"3d",OBJECT_IMAGE3D:"image3d",OBJECT_MOVIE3D:"movie3d",OBJECT_LIGHT:"light",OBJECT_STATE_LOADING:"loading",OBJECT_STATE_READY:"ready",SCENE_CATEGORY:"scene",GESTUREHANDLER_CATEGORY:"gesturehandler",MEDIA_CATEGORY:"media",COMMAND_DELIMITER:";"},Debug:{active:false,ready:false,activeBrowser:false,stream:true,LOG:"log",ERROR:"error",LOGSTREAM:"logstream",debugContainer:undefined,debugContainerID:"arelDebugConsole",debugContainerBarID:"arelDebugConsoleBar",debugContainerTextID:"debugContainerTextID",activate:function(){if(!arel.Debug.ready){arel.Debug.active=true;arel.Debug.debugContainer=document.createElement("div");arel.Debug.debugContainer.id=arel.Debug.debugContainerID;arel.Debug.debugContainer.setAttribute("style","position: absolute; display: block; font-family: Helvetica, Arial, sans-serif; font-size: .7em; margin-top: 0px; top: 0px; left: 0px; z-index: 1000; color: black; height: 20%;");var c=document.createElement("div");var a=document.createTextNode("AREL Debug console");c.id=arel.Debug.debugContainerBarID;c.setAttribute("style","display: block; position: fixed; font-weight: bold; padding: 5px; width: 100%; background-color: #CCCCCC; user-select: text; -webkit-user-select: text; overflow: hidden; height: 15px; z-index: 1002;");c.appendChild(a);var b=document.createElement("div");b.id=arel.Debug.debugContainerTextID;b.setAttribute("style","display: block; position: fixed; margin-top: 25px; padding: 5px 5px 5px 5px; user-select: text; -webkit-user-select: text; z-index: 1001; overflow: scroll; background-color: white; height: 20%; width: "+document.documentElement.clientWidth+"px");arel.Debug.debugContainer.appendChild(c);arel.Debug.debugContainer.appendChild(b);if(arel.isReady){arel.Debug.setDebugContainer()}}},setDebugContainer:function(){if(!arel.Debug.ready){document.body.appendChild(arel.Debug.debugContainer);var f="touchstart";var g="touchmove";var e="touchend";var b="touchleave";var i="touchcancel";var h=false;var a=10;var d=0;var c=document.documentElement.clientHeight-50;if(arel.Debug.activeBrowser){f="mousedown";g="mousemove";e="mouseup";b="mouseleave";i="mousecancel"}document.getElementById(arel.Debug.debugContainerBarID).addEventListener(f,function(j){h=true;document.getElementById(arel.Debug.debugContainerID).style.opacity=0.5;event.preventDefault()});document.getElementById(arel.Debug.debugContainerBarID).addEventListener(g,function(k){if(h){j=d;if(event.touches){var j=event.touches[0].pageY-a}if(arel.Debug.activeBrowser){j=event.pageY-a}if(j<d){j=d}if(j>c){j=c}document.getElementById(arel.Debug.debugContainerID).style.marginTop=j+"px";event.preventDefault()}});document.getElementById(arel.Debug.debugContainerBarID).addEventListener(e,function(j){h=false;document.getElementById(arel.Debug.debugContainerID).style.opacity=1});document.getElementById(arel.Debug.debugContainerBarID).addEventListener(i,function(j){h=false;document.getElementById(arel.Debug.debugContainerID).style.opacity=1});document.getElementById(arel.Debug.debugContainerBarID).addEventListener(b,function(j){h=false;document.getElementById(arel.Debug.debugContainerID).style.opacity=1});arel.Debug.ready=true}},deactivate:function(){arel.Debug.active=false;arel.Debug.ready=false;var b=document.getElementById(arel.Debug.debugContainerID).parentNode;var a=document.getElementById(arel.Debug.debugContainerID);b.removeChild(a)},activateArelLogStream:function(){arel.Debug.stream=true},deactivateArelLogStream:function(){arel.Debug.stream=false},checkCompatibility:function(b,a){if(arel.SceneCache.appAPILevel===undefined){arel.Debug.log("Feature "+a+" used before sceneReady event, cannot check compatibility")}else{if(arel.SceneCache.appAPILevel<b){arel.Debug.onIncompatibleFeatureUsed(b,a)}}},logStream:function(a){if(arel.Debug.active&&arel.Debug.stream&&arel.sceneIsReady){arel.Debug.out(a,arel.Debug.LOGSTREAM)}},log:function(c){if(Object.prototype.toString.call(c)==="[object Array]"){var d={};for(var b in c){d[b]=c[b]}c=d}var a=JSON.stringify(c);return arel.Debug.out(a,arel.Debug.LOG)},error:function(d){try{if(Object.prototype.toString.call(d)==="[object Array]"){var f={};for(var c in d){f[c]=d[c]}d=f}var b=JSON.stringify(d);var a="";return arel.Debug.out("Error"+a+": "+b,arel.Debug.ERROR)}catch(g){return arel.Debug.out("Error: "+g,arel.Debug.ERROR)}},onIncompatibleFeatureUsed:function(b,a){arel.Debug.error("Application's AREL level is "+arel.SceneCache.appAPILevel+", but feature "+a+" requires level "+b+"! Please update your Metaio SDK.")},out:function(f,d){try{if(arel.Debug.debugContainer!==undefined&&document.getElementById(arel.Debug.debugContainerID)!==null){var b=document.createElement("div");if(d===arel.Debug.LOG){b.setAttribute("style","color: #333")}else{if(d===arel.Debug.LOGSTREAM){b.setAttribute("style","font-style: italic")}else{if(d===arel.Debug.ERROR){b.setAttribute("style","color: #f33")}}}var a=document.createTextNode(f);b.appendChild(a);document.getElementById(arel.Debug.debugContainerTextID).insertBefore(b,document.getElementById(arel.Debug.debugContainerTextID).firstChild);return true}else{if(arelTEST){return f}else{if(f.indexOf("Log message before AREL debug console was ready")!=-1){return true}var c=d===arel.Debug.ERROR?console.error:console.log;c.call(console,"Log message before AREL debug console was ready: "+f);return true}}}catch(g){return false}}},Light:{LIGHT_TYPE_DIRECTIONAL:"directional",LIGHT_TYPE_POINT:"point",LIGHT_TYPE_SPOT:"spot"},RenderOption:{BACK_FACE_CULLING:1,FRONT_FACE_CULLING:2,ZWRITE:3,ZTEST:4,COLOR_MASK:5,DEBUG_DATA:6,TEXTURE_FILTERING:7},Tracking:{STATE_TRACKING:"tracking",STATE_EXTRAPOLATED:"extrapolated",STATE_NOTTRACKING:"not_tracking",STATE_INITIALIZED:"state_initialized",STATE_INITIALIZATION_FAILED:"state_initialization_failed",STATE_REGISTERED:"state_registered",GPS:"GPS",NONE:"",Orientation:"Orientation",LLA_MARKER:"LLA",BARCODE_QR:"Code",MARKERLESS_3D:"ML3D",MARKERLESS_2D:"ML2D",MARKER:"Marker",INSTANT2D:"INSTANT_2D",INSTANT2DG:"INSTANT_2D_GRAVITY",INSTANT2DGE:"INSTANT_2D_GRAVITY_EXTRAPOLATED",INSTANT_2D_GRAVITY_SLAM:"INSTANT_2D_GRAVITY_SLAM",INSTANT_2D_GRAVITY_SLAM_EXTRAPOLATED:"INSTANT_2D_GRAVITY_SLAM_EXTRAPOLATED",INSTANT3D:"INSTANT_3D",SLAM:"INSTANT_3D",FACE:"FACE",OTHER:"other"},Error:{write:function(a){if(arel.Debug.active){arel.Debug.error(a);return false}else{if(arelTEST){return"ERROR: "+a}else{arel.Debug.error("ERROR: "+a);return false}}}},SceneCache:{id:undefined,appAPILevel:undefined},include:function(b){var c=document.getElementsByTagName("head")[0];var a=document.createElement("script");a.src=b;a.type="text/javascript";c.appendChild(a)},ready:function(a,b,c){if(c){arel.Debug.activeBrowser=true}if(b){arel.Debug.activate();arel.Debug.logStream("AREL is ready for execution.")}arel.readyCallback=a;if(arel.isReady){if(typeof(arel.readyCallback)==="function"&&arel.readyCalled===false){arel.readyCalled=true;arel.readyCallback();arel.ClientInterface.arelReady()}}},sceneReady:function(a,b,c){if(c){arel.Debug.activeBrowser=true;arel.Debug.logStream("Scene is ready.")}if(b){arel.Debug.activate()}arel.sceneReadyCallback=a;if(arel.sceneIsReady){if(typeof(arel.sceneReadyCallback)==="function"&&arel.sceneReadyCalled===false){if(arel.readyCalled===false){arel.readyCalled=true;arel.readyCallback()}arel.sceneReadyCalled=true;arel.sceneReadyCallback({id:arel.SceneCache.id})}}},sceneIsReadyForExecution:function(){if(typeof(arel.sceneReadyCallback)==="function"&&arel.sceneReadyCalled===false){arel.sceneReadyCalled=true;arel.sceneReadyCallback({id:arel.SceneCache.id})}arel.sceneIsReady=true},readyforexecution:function(a){if(arel.Debug.active){arel.Debug.setDebugContainer()}if(typeof(arel.readyCallback)==="function"&&arel.readyCalled===false){arel.readyCallback();arel.readyCalled=true}if(!arel.isReady){arel.ClientInterface.arelReady();arel.isReady=true}},flush:function(){var a="";if(arel.commandQueue.length>0){a=arel.commandQueue.join(arel.Config.COMMAND_DELIMITER);arel.commandQueue=[]}if(typeof Android!=="undefined"){Android.flush(a)}return a}};arel.ObjectCache={aObjects:[],setObjects:function(a){this.removeObjects();for(var b in a){if(typeof(a[b])!=="function"){this.addObject(a[b])}}},addObject:function(b,c){if(b instanceof arel.Object){b.setState(arel.Config.OBJECT_STATE_LOADING);if(b.getID()!==undefined){this.aObjects[b.getID()]=b;return true}else{return arel.Error.write("Object is missing an ID.")}}else{if(typeof(b)!=="function"){var a=undefined;if(b.hasOwnProperty("type")){if(b.type===arel.Config.OBJECT_POI){a=new arel.Object.POI()}else{if(b.type===arel.Config.OBJECT_MODEL3D){a=new arel.Object.Model3D()}else{if(b.type===arel.Config.OBJECT_MOVIE3D){a=arel.Object.Model3D.createFromMovie()}else{if(b.type===arel.Config.OBJECT_IMAGE3D){a=arel.Object.Model3D.createFromImage()}else{if(b.type===arel.Config.OBJECT_LIGHT){a=new arel.Object.Light()}else{return arel.Error.write("ERROR: Unknown object category")}}}}}a.applyProperties(b);if(a.getID()!==undefined){a.setState(arel.Config.OBJECT_STATE_LOADING);this.aObjects[a.getID()]=a;return true}else{return arel.Error.write("Object is missing an ID.")}}else{return arel.Error.write("An object category must be given.")}}}},getObjects:function(){var b=[];for(var a in this.aObjects){var c=typeof(this.aObjects[a]);if((c!=="function")&&(c!=="undefined")){b[a]=this.aObjects[a];length++}}return b},getObject:function(a){if(this.aObjects[a]!==undefined&&this.aObjects[a] instanceof arel.Object){return this.aObjects[a]}arel.Debug.out("Error: Object "+a+" does not exist.",arel.Debug.LOG);return false},removeObjects:function(){this.aObjects=[]},removeObject:function(a){delete this.aObjects[a]},objectExists:function(a){return this.aObjects[a] instanceof arel.Object},setObjectStateToReady:function(a){this.aObjects[a].setState(arel.Config.OBJECT_STATE_READY)},setObjectState:function(b,a){this.aObjects[b].setState(a)}};arel.ClientInterface={protocol:"arel://",apilevel:"18",scene:{sceneTerm:"scene",addObject:function(b){arel.Debug.logStream("Object added to Scene: "+b.getID());var a=arel.ClientInterface.protocol+this.sceneTerm+"/addObject/"+b.toParameter();return arel.ClientInterface.out(a)},getHandEyeCalibration:function(c,b){arel.Debug.logStream("Requesting hand-eye calibration");var a=arel.ClientInterface.protocol+this.sceneTerm+"/getHandEyeCalibration/?callbackid="+b+arel.Util.toParameter({cameratype:c},true);return arel.ClientInterface.out(a)},removeObjects:function(){arel.Debug.logStream("All objects removed.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/removeObjects/";return arel.ClientInterface.out(a)},removeObject:function(a){arel.Debug.logStream("Single object removed: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/removeObject/?id="+a;return arel.ClientInterface.out(b)},setAnnotationsBottomPadding:function(b){var a=arel.ClientInterface.protocol+this.sceneTerm+"/setAnnotationsBottomPadding/"+arel.Util.toParameter({value:b},false);return arel.ClientInterface.out(a)},gestureHandlerAddObject:function(b,a){arel.Debug.logStream("Adding object to Gesture handler: "+b);var c=arel.ClientInterface.protocol+this.sceneTerm+"/gesturehandler/?id="+b+"&action=add";if(a!==undefined){c=c+"&group="+a}return arel.ClientInterface.out(c)},gestureHandlerRemoveObject:function(a){arel.Debug.logStream("Removing object from Gesture handler: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/gesturehandler/?id="+a+"&action=remove";return arel.ClientInterface.out(b)},gestureHandlerRemoveAllObjects:function(){arel.Debug.logStream("Removinging all objects from Gesture handler.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/gesturehandler/?action=removeall";return arel.ClientInterface.out(a)},gestureHandlerGetGestures:function(a){arel.Debug.logStream("Getting setup gestures from Gesture handler");var b=arel.ClientInterface.protocol+this.sceneTerm+"/gesturehandler/?action=get&callbackid="+a;arel.ClientInterface.out(b)},gestureHandlerEnableGestures:function(a){arel.Debug.logStream("Enabling/disabling gestures in Gesture handler");var b=arel.ClientInterface.protocol+this.sceneTerm+"/gesturehandler/?action=enable&bitmask="+a;return arel.ClientInterface.out(b)},getID:function(a){arel.Debug.logStream("asking for scene ID");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getID/?callbackid="+a;return arel.ClientInterface.out(b)},switchChannel:function(c,a){arel.Debug.logStream("Switching Channel to "+c);var b=arel.ClientInterface.protocol+this.sceneTerm+"/switchChannel/?id="+c+a;return arel.ClientInterface.out(b)},setAmbientLight:function(a){arel.Debug.logStream("Changing global ambient light color to "+a);var c=a.toParameterObject("ambientcolor");var b=arel.ClientInterface.protocol+this.sceneTerm+"/setAmbientLight/"+arel.Util.toParameter(c,false);return arel.ClientInterface.out(b)},setTrackingConfiguration:function(c,b){arel.Debug.logStream("Changing Tracking Configuration to "+c);var a=arel.ClientInterface.protocol+this.sceneTerm+"/setTrackingConfiguration/?tracking="+encodeURIComponent(c);if(typeof b!=="undefined"){a=a+"&readfromfile="+b}return arel.ClientInterface.out(a)},loadEnvironmentMap:function(a){arel.Debug.logStream("Loading Environment map"+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/loadenvironmentmap/?url="+encodeURIComponent(a);return arel.ClientInterface.out(b)},loadShaderMaterials:function(b,a){arel.Debug.logStream("Loading shader materials from "+b);var c=arel.ClientInterface.protocol+this.sceneTerm+"/loadshadermaterials/?url="+encodeURIComponent(b);if(a!==undefined){c+="&callbackid="+a}return arel.ClientInterface.out(c)},startCamera:function(b,c,a,d,f){arel.Debug.logStream("Starting camera.");var e;if(b instanceof arel.Camera){e=arel.ClientInterface.protocol+this.sceneTerm+"/startCamera?camera="+encodeURIComponent(b.toJSON());if(c!==null){e+="&callbackid="+c}}else{e=arel.ClientInterface.protocol+this.sceneTerm+"/startCamera?cameraIndex="+encodeURIComponent(b.toString())+"&width="+encodeURIComponent(c.toString())+"&height="+encodeURIComponent(a.toString())+"&downsample="+encodeURIComponent(d.toString())+"&enableYUVpipeline="+(f?"true":"false")}return arel.ClientInterface.out(e)},stopCamera:function(){arel.Debug.logStream("Stopping camera.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/stopCamera";return arel.ClientInterface.out(a)},startTorch:function(){arel.Debug.logStream("Starting camera.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/startTorch";return arel.ClientInterface.out(a)},stopTorch:function(){arel.Debug.logStream("Stopping camera.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/stopTorch";return arel.ClientInterface.out(a)},setFreezeTracking:function(a){arel.Debug.logStream("setFreezeTracking: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/setFreezeTracking/?value="+a;return arel.ClientInterface.out(b)},triggerServerCall:function(b){arel.Debug.logStream("Triggering Server call.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/triggerServerCall/"+b;return arel.ClientInterface.out(a)},setLocation:function(a){arel.Debug.logStream("Setting LLA location to "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/setLocation/"+a;return arel.ClientInterface.out(b)},getLocation:function(a){arel.Debug.logStream("Requesting location.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getLocation/?callbackid="+a;return arel.ClientInterface.out(b)},getScreenshot:function(a){arel.Debug.logStream("Requesting screenshot.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getScreenshot/"+a;return arel.ClientInterface.out(b)},sensorCommand:function(a){arel.Debug.logStream("Executing sensorCommand.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/sensorCommand/"+a;return arel.ClientInterface.out(b)},getCompassRotation:function(a){arel.Debug.logStream("Requesting compass rotation.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getCompassRotation/?callbackid="+a;return arel.ClientInterface.out(b)},getTrackingValues:function(a,c){arel.Debug.logStream("Requesting tracking values.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getTrackingValues/?callbackid="+c+"&rotate="+(a?"true":"false");return arel.ClientInterface.out(b)},getAllObjectsFromViewportCoordinates:function(f,a,d,c){var e=arel.Util.toParameter(f);arel.Debug.logStream("Requesting all objects from screen coordinate "+e);e+=arel.Util.toParameter({usetriangletest:a,maxgeometriestoreturn:d},true)+"&callbackid="+c;var b=arel.ClientInterface.protocol+this.sceneTerm+"/getAllObjectsFromViewportCoordinates/"+e;return arel.ClientInterface.out(b)},getCameraImageCoordinatesFrom3DPosition:function(e,a,c){var d=arel.Util.toParameter(a);var f=parseInt(e,10);arel.Debug.logStream("Requesting camera image coordinates from point "+d+" in COS "+f);d+=arel.Util.toParameter({coordinatesystemid:f},true)+"&callbackid="+c;var b=arel.ClientInterface.protocol+this.sceneTerm+"/getCameraImageCoordinatesFrom3DPosition/"+d;return arel.ClientInterface.out(b)},getObjectFromViewportCoordinates:function(a,c){arel.Debug.logStream("Requesting Object from viewport coordinate "+a);var b=arel.SceneCache.appAPILevel!==undefined&&arel.SceneCache.appAPILevel<16?"/getObjectFromScreenCoordinates/":"/getObjectFromViewportCoordinates/";var d=arel.ClientInterface.protocol+this.sceneTerm+b+a+"&callbackid="+c;return arel.ClientInterface.out(d)},get3DPositionFromViewportCoordinates:function(a,e,c){arel.Debug.logStream("Requesting 3D coordinates for coordinate system "+e+" at viewport location "+a);var b=arel.SceneCache.appAPILevel!==undefined&&arel.SceneCache.appAPILevel<16?"/get3DPositionFromScreenCoordinates/":"/get3DPositionFromViewportCoordinates/";var d=arel.ClientInterface.protocol+this.sceneTerm+b+a.toUpperCase()+"&coordinateSystemID="+e+"&callbackid="+c;return arel.ClientInterface.out(d)},getViewportCoordinatesFrom3DPosition:function(a,e,c){arel.Debug.logStream("Requesting 2D coordinates for coordinate system "+e+" at 3D position "+a);var b=arel.SceneCache.appAPILevel!==undefined&&arel.SceneCache.appAPILevel<16?"/getScreenCoordinatesFrom3DPosition/":"/getViewportCoordinatesFrom3DPosition/";var d=arel.ClientInterface.protocol+this.sceneTerm+b+a.toUpperCase()+"&coordinateSystemID="+e+"&callbackid="+c;return arel.ClientInterface.out(d)},startInstantTracking:function(a){arel.Debug.logStream("Request instant tracking type: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/startInstantTracking/"+a;return arel.ClientInterface.out(b)},shareScreenshot:function(b){arel.Debug.logStream("Share screenshot.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/sharescreenshot/?onlysavetogallery="+b;return arel.ClientInterface.out(a)},shareImage:function(a,c){arel.Debug.logStream("Share image.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/shareimage/"+arel.Util.toParameter(a.toParameterObject())+"&onlysavetogallery="+c;return arel.ClientInterface.out(b)},requestVisualSearch:function(d,c,b){arel.Debug.logStream("Requesting visualsearch: "+d);var a=arel.ClientInterface.protocol+this.sceneTerm+"/requestvisualsearch/?database="+d+"&returnFullTrackingConfig="+c;if((b!==undefined)&&b.substring(0,4)=="http"){var a=a+"&visualsearchserver="+encodeURIComponent(b)}return arel.ClientInterface.out(a)},setCameraParametersFromValues:function(b,a,d,c,f){if(!(b instanceof arel.Vector2D)||!(a instanceof arel.Vector2D)||!(d instanceof arel.Vector2D)||!(c instanceof arel.Vector4D)){return arel.Error.write("setCameraParametersFromValues: Arguments must be of type arel.Vector2D/arel.Vector4D (see documentation)")}var e=arel.ClientInterface.protocol+this.sceneTerm+"/setCameraParametersFromValues/"+arel.Util.toParameter(b.toParameterObject("imageresolution"),false)+arel.Util.toParameter(a.toParameterObject("focallengths"),true)+arel.Util.toParameter(d.toParameterObject("principalpoint"),true)+arel.Util.toParameter(c.toParameterObject("distortion"),true);if(f!==undefined){e+=arel.Util.toParameter({cameratype:f},true)}return arel.ClientInterface.out(e)},setCameraParametersFromXML:function(c,b){var a=arel.ClientInterface.protocol+this.sceneTerm+"/setCameraParametersFromXML/?parameters="+encodeURIComponent(c);if(b!==undefined){a+=arel.Util.toParameter({cameratype:b},true)}return arel.ClientInterface.out(a)},setHandEyeCalibration:function(d,a,c){var b=arel.ClientInterface.protocol+this.sceneTerm+"/setHandEyeCalibration/"+arel.Util.toParameter(d.toParameterObject("trans"),false)+arel.Util.toParameter(a.toParameterObject(),true)+arel.Util.toParameter({cameratype:c},true);return arel.ClientInterface.out(b)},setPickingSoundEnabled:function(a){arel.Debug.logStream((a?"Enabling":"Disabling")+" picking sound");var b=arel.ClientInterface.protocol+this.sceneTerm+"/setPickingSoundEnabled/?value="+a;return arel.ClientInterface.out(b)},setSeeThrough:function(a){arel.Debug.logStream("Setting see through mode to "+a?"true":"false");var b=arel.ClientInterface.protocol+this.sceneTerm+"/setSeeThrough/?enabled="+a;return arel.ClientInterface.out(b)},setSeeThroughColor:function(a){arel.Debug.logStream("Changing see through color to "+a);var c=a.toParameterObject("seeThroughColor");var b=arel.ClientInterface.protocol+this.sceneTerm+"/setSeeThroughColor/"+arel.Util.toParameter(c,false);return arel.ClientInterface.out(b)},setStereoRendering:function(a){arel.Debug.logStream("Setting stereo rendering mode to "+a?"enabled":"disabled");var b=arel.ClientInterface.protocol+this.sceneTerm+"/setStereoRendering/?stereoRendering="+a;return arel.ClientInterface.out(b)},setAdvancedRenderingFeatures:function(a){arel.Debug.logStream((a?"Enabling ":"Disabling ")+"advanced rendering features");var b=arel.ClientInterface.protocol+this.sceneTerm+"/setAdvancedRenderingFeatures/?enabled="+a;return arel.ClientInterface.out(b)},autoEnableAdvancedRenderingFeatures:function(a){arel.Debug.logStream("Auto enabling advanced rendering features");var b=arel.ClientInterface.protocol+this.sceneTerm+"/autoEnableAdvancedRenderingFeatures/?&callbackid="+a;return arel.ClientInterface.out(b)},isAdvancedRenderingSupported:function(a){arel.Debug.logStream("Checking if advanced rendering is supported by this device");var b=arel.ClientInterface.protocol+this.sceneTerm+"/isAdvancedRenderingSupported/?&callbackid="+a;return arel.ClientInterface.out(b)},setDepthOfFieldParameters:function(c,b,a){arel.Debug.logStream("Setting depth of field parameters: Focal Legth: "+c+", Focal Distance: "+b+", Aperture: "+a);var d=arel.ClientInterface.protocol+this.sceneTerm+"/setDepthOfFieldParameters/?focalLength="+c+"&focalDistance="+b+"&aperture="+a;return arel.ClientInterface.out(d)},setMotionBlurIntensity:function(a){arel.Debug.logStream("Setting motion blur intensity to: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/setMotionBlurIntensity/?intensity="+a;return arel.ClientInterface.out(b)}},object:{objectTerm:"object",edit:function(d,b,a){arel.Debug.logStream("Edit object "+d+"; set"+b);var c=arel.ClientInterface.protocol+this.objectTerm+"/set"+b+"/?id="+d+a;return arel.ClientInterface.handleObjectRequest(d,c,b)},setCurrentFrame:function(d,c,a){var b=arel.ClientInterface.protocol+this.objectTerm+"/setCurrentFrame/"+arel.Util.toParameter({framenumber:c,id:d,},false);if(a!==undefined){b+=arel.Util.toParameter({animtype:a},true)}return arel.ClientInterface.handleObjectRequest(d,b)},getCurrentFrame:function(d,a,c){var b=arel.ClientInterface.protocol+this.objectTerm+"/getCurrentFrame/"+arel.Util.toParameter({callbackid:c,id:d,},false);if(a!==undefined){b+=arel.Util.toParameter({animtype:a},true)}return arel.ClientInterface.handleObjectRequest(d,b)},getCustomAnimation:function(d,a,c){arel.Debug.logStream("Requesting custom animation '"+a+"' for object '"+d+"'");var b=arel.ClientInterface.protocol+this.objectTerm+"/getCustomAnimation/"+arel.Util.toParameter({callbackid:c,animationname:a,callbackid:c,id:d,},false);return arel.ClientInterface.handleObjectRequest(d,b)},startAnimation:function(c,a){arel.Debug.logStream("Start animation of object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/startAnimation/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},startAnimationRange:function(f,b,d,a){arel.Debug.logStream("Start animation of object "+f+" (range of frames ["+b+","+d+"]");var e={id:f,startframe:b,stopframe:d};if(a!==undefined){e.loop=!!a}var c=arel.ClientInterface.protocol+this.objectTerm+"/startAnimationRange/"+arel.Util.toParameter(e);return arel.ClientInterface.handleObjectRequest(f,c)},stopAnimation:function(c,a){arel.Debug.logStream("stop animation of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/stopAnimation/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},pauseAnimation:function(c,a){arel.Debug.logStream("Pause animation of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/pauseAnimation/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},startMovieTexture:function(c,a){arel.Debug.logStream("Start movie texture of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/startMovieTexture/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},pauseMovieTexture:function(c,a){arel.Debug.logStream("Pause movie texture of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/pauseMovieTexture/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},stopMovieTexture:function(c,a){arel.Debug.logStream("Stop movie texture of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/stopMovieTexture/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},getMovieTextureStatus:function(b){arel.Debug.logStream("Requesting object's movie texture status");var a=arel.ClientInterface.protocol+this.objectTerm+"/getMovieTextureStatus/"+b;return arel.ClientInterface.out(a)},getIsRendered:function(b){arel.Debug.logStream("Requesting if object is rendered.");var a=arel.ClientInterface.protocol+this.objectTerm+"/isRendered/"+b;return arel.ClientInterface.out(a)}},navigate:{navigateTerm:"navigate",routeOnMap:function(a){arel.Debug.logStream("Route on Map");var b=arel.ClientInterface.protocol+this.navigateTerm+"/routeOnMap/"+a;return arel.ClientInterface.out(b)}},media:{mediaTerm:"media",speak:function(b){arel.Debug.logStream("Speaking text: "+b);var a=arel.ClientInterface.protocol+this.mediaTerm+"/speak/?text="+encodeURIComponent(b);return arel.ClientInterface.out(a)},website:function(a){arel.Debug.logStream("Handling url "+a);var b=arel.ClientInterface.protocol+this.mediaTerm+"/website/"+a;return arel.ClientInterface.out(b)},sound:function(a){arel.Debug.logStream("Handling sound "+a);var b=arel.ClientInterface.protocol+this.mediaTerm+"/sound/"+a;return arel.ClientInterface.out(b)},image:function(a){arel.Debug.logStream("Handling image "+a);var b=arel.ClientInterface.protocol+this.mediaTerm+"/image/"+a;return arel.ClientInterface.out(b)},video:function(a){arel.Debug.logStream("Handling fullscreen video "+a);var b=arel.ClientInterface.protocol+this.mediaTerm+"/video/"+a;return arel.ClientInterface.out(b)},vibrate:function(){arel.Debug.logStream("Handling vibration alert");var a=arel.ClientInterface.protocol+this.mediaTerm+"/vibrate";return arel.ClientInterface.out(a)},playAlert:function(){arel.Debug.logStream("Playing alert sound");var a=arel.ClientInterface.protocol+this.mediaTerm+"/playalert";return arel.ClientInterface.out(a)},createCalendarEvent:function(b,e,c,a,d){arel.Debug.logStream("Creating calendar entry");var f=arel.ClientInterface.protocol+this.mediaTerm+"/createcalendarevent/?startdate="+b+"&enddate="+e+"&subject="+c+"&description="+a+"&location="+d;return arel.ClientInterface.out(f)}},junaio:{junaioTerm:"junaio",authenticate:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/authenticate/?callbackid="+a;return arel.ClientInterface.out(b)},signup:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/signup/?callbackid="+a;return arel.ClientInterface.out(b)},login:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/login/?callbackid="+a;return arel.ClientInterface.out(b)},logout:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/logout/?callbackid="+a;return arel.ClientInterface.out(b)},getHistory:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/getHistory/?callbackid="+a;return arel.ClientInterface.out(b)},manageFavorites:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/manageFavorites/"+a;return arel.ClientInterface.out(b)},getFavorites:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/getFavorites/?callbackid="+a;return arel.ClientInterface.out(b)}},arelReady:function(){var a=arel.ClientInterface.protocol+"arelReady/?apilevel="+arel.ClientInterface.apilevel;return arel.ClientInterface.out(a)},handleObjectRequest:function(c,a,b){if(arel.ObjectCache.getObject(c).getState()===arel.Config.OBJECT_STATE_READY){return arel.ClientInterface.out(a)}else{if(arel.commandCachePerObject[c]===undefined){arel.commandCachePerObject[c]=[a]}else{arel.commandCachePerObject[c].push(a)}return"Command stacked for "+c}},queueCachedObjectRequests:function(b){if(arel.commandCachePerObject[b]!==undefined){for(var a=0;a<arel.commandCachePerObject[b].length;++a){if(typeof(arel.commandCachePerObject[b][a])!=="function"){arel.ClientInterface.out(arel.commandCachePerObject[b][a])}}delete arel.commandCachePerObject[b]}},out:function(a){if(arel.Debug.activeBrowser){console.debug(a)}else{if(arelTEST){return a}else{arel.commandQueue.push(a);window.location="arel://requestsPending"}}},beacon:{beaconTerm:"beacon",addCallbackHandler:function(f,a,i,g,e,h,b){arel.Debug.logStream("Request Beacon Callbacks for "+a+",  major: "+i+", minor: "+g);var c="/addCallback/";var d=arel.ClientInterface.protocol+this.beaconTerm+c+"?identifier="+f+"&proximityUUD="+a;if(i!=-1){d+="&major="+i;if(g!=-1){d+="&minor="+g}}if(e){d+="&callbackiddidenter="+e}if(h){d+="&callbackiddidexit="+h}if(b){d+="&callbackidupdate="+b}console.log(d);return arel.ClientInterface.out(d)},removeCallbackHandler:function(c){arel.Debug.logStream("Remove iBeacon Callback for identifier: "+c);var a="/removeCallback/";var b=arel.ClientInterface.protocol+this.beaconTerm+a+"?identifier="+c;return arel.ClientInterface.out(b)},isBeaconSupported:function(b){arel.Debug.logStream("Testing if Beacon is supported");var a="/isBeaconSupported/";var c=arel.ClientInterface.protocol+this.beaconTerm+a+"?callbackid="+b;return arel.ClientInterface.out(c)}},};function urldecode(a){return decodeURIComponent((a+"").replace(/\+/g,"%20"))}arel.Parser={parseLocation:function(a){var b=new arel.LLA();if(a.lat!==undefined){if(this.validateLatitude(a.lat)){b.setLatitude(a.lat)}else{return arel.Error.write("Invalid Location")}}if(a.lng!==undefined){if(this.validateLongitude(a.lng)){b.setLongitude(a.lng)}else{return arel.Error.write("Invalid Location")}}if(a.lng!==undefined){b.setAltitude(a.alt)}else{b.setAltitude(0)}if(a.acc!==undefined){b.setAccuracy(a.acc)}return b},parseRotation:function(a){return new arel.Rotation(a.q1,a.q2,a.q3,a.q4)},parseScale:function(a){var b=new arel.Vector3D();if(a.x!==undefined&&a.y!==undefined&&a.z!==undefined){b=new arel.Vector3D(a.x,a.y,a.z)}else{return arel.Error.write("Invalid scale given")}return b},parseTranslation:function(a){var b=new arel.Vector3D();if(a.x!==undefined&&a.y!==undefined&&a.z!==undefined){b=new arel.Vector3D(a.x,a.y,a.z)}else{return arel.Error.write("Invalid translation given")}return b},parseOnScreen:function(b){var a=new arel.Vector2D();if(b.x!==undefined&&b.y!==undefined){a=new arel.Vector3D(b.x,b.y,b.z)}else{return arel.Error.write("Invalid onScreen given")}return a},parsePopUp:function(d,a){var c=undefined;var e=[];if(d.description){c=urldecode(d.description)}if(d.buttons&&d.buttons.length>0){for(var b in d.buttons){if(typeof(d.buttons[b])!=="function"){e[e.length]=new arel.PopupButton(urldecode(d.buttons[b][0]),urldecode(d.buttons[b][1]),urldecode(d.buttons[b][2]))}}}return new arel.Popup({buttons:e,description:c})},parseParameters:function(a){var c={};if(a){for(var b in a){if(typeof(a[b])!=="function"){c[urldecode(b)]=urldecode(a[b])}}}return c},parseVector3d:function(b){var a=new arel.Vector3D();if(b.x!==undefined&&b.y!==undefined&&b.z!==undefined){a=new arel.Vector3D(b.x,b.y,b.z)}else{return arel.Error.write("Invalid Vector3d given")}return a},validateLatitude:function(a){return !(a<-90||a>90)},validateLongitude:function(a){return !(a<-180||a>180)}};arel.Util={toParameter:function(d,b){var e="";var c=0;for(var a in d){if(typeof(d[a])!=="function"&&d[a]!==undefined){if(c===0&&!b){e+="?"+a+"="+encodeURIComponent(d[a])}else{e+="&"+a+"="+encodeURIComponent(d[a])}c++}}return e},clamp:function(c,a,b){return Math.min(Math.max(c,a),b)},deepClone:function(a){return JSON.parse(JSON.stringify(a))},vec3DToDeg:function(c){var a=c.getX()*180/Math.PI;var d=c.getY()*180/Math.PI;var b=c.getZ()*180/Math.PI;return new arel.Vector3D(a,d,b)},vec3DToRad:function(c){var a=c.getX()*Math.PI/180;var d=c.getY()*Math.PI/180;var b=c.getZ()*Math.PI/180;return new arel.Vector3D(a,d,b)},numberOfArelObjects:function(c){var b=0;for(var a in c){if(c[a] instanceof arel.Object){b++}}return b},getDistanceBetweenLocationsInMeter:function(g,e){if(!(g instanceof arel.LLA)||!(e instanceof arel.LLA)){return arel.Error.write("lla1 and lla2 must be of type arel.LLA")}var f=g.getLatitude();var i=g.getLongitude();var d=e.getLatitude();var h=e.getLongitude();var n=Math.PI/180;var m=6371009;var j=(f-d)*n;var b=(i-h)*n;var l=Math.pow(Math.sin(j/2),2)+Math.cos(f*n)*Math.cos(d*n)*Math.pow(Math.sin(b/2),2);var k=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return m*k}};arel.Object=function(){this.CATEGORY=arel.Config.OBJECT_INTERFACE_CATEGORY;this.id=undefined;this.dynamicLightingEnabled=undefined;this.llaLimitsEnabled=undefined;this.title=undefined;this.popup=undefined;this.location=undefined;this.iconPath=undefined;this.thumbnailPath=undefined;this.minaccuracy=undefined;this.maxdistance=undefined;this.mindistance=undefined;this.state=undefined;this.parameters=undefined;this.visibility=undefined;this.shadermaterial=undefined;this.parentobject=undefined;this.imagedata=undefined;this.setID=function(a){this.id=a};this.getID=function(){return this.id};this.isDynamicLightingEnabled=function(){return this.dynamicLightingEnabled};this.setDynamicLightingEnabled=function(a){a=!!a;this.dynamicLightingEnabled=a;return arel.Scene.updateObject(this.id,"DynamicLightingEnabled",a,arel.Util.toParameter({value:a},true))};this.setLLALimitsEnabled=function(a){a=!!a;this.llaLimitsEnabled=a;return arel.Scene.updateObject(this.id,"LLALimitsEnabled",a,arel.Util.toParameter({value:a},true))};this.setTitle=function(a){this.title=a;return arel.Scene.updateObject(this.id,"Title",a,arel.Util.toParameter({value:a},true))};this.getTitle=function(){return this.title};this.setPopup=function(b){this.popup=b;var a=this.popup.toParameterObject();return arel.Scene.updateObject(this.id,"Popup",this.popup,arel.Util.toParameter(a,true))};this.getPopup=function(){return this.popup};this.setLocation=function(a){if(!(a instanceof arel.LLA)){return arel.Error.write("_location must be of type arel.LLA")}this.location=a;var b=this.location.toParameterObject();return arel.Scene.updateObject(this.id,"Location",a,arel.Util.toParameter(b,true))};this.getLocation=function(){return this.location};this.setIcon=function(a){this.iconPath=a;return arel.Scene.updateObject(this.id,"Icon",a,arel.Util.toParameter({value:a},true))};this.getIcon=function(){return this.iconPath};this.setThumbnail=function(a){this.thumbnailPath=a;return arel.Scene.updateObject(this.id,"Thumbnail",a,arel.Util.toParameter({value:a},true))};this.getThumbnail=function(){return this.thumbnailPath};this.setShaderMaterial=function(a){this.shadermaterial=a;return arel.Scene.updateObject(this.id,"ShaderMaterial",a,arel.Util.toParameter({value:a},true))};this.getShaderMaterial=function(){return this.shadermaterial};this.setParent=function(a){this.parentobject=a;return arel.Scene.updateObject(this.id,"Parent",a,arel.Util.toParameter({value:a},true))};this.getParent=function(){return this.parentobject};this.setMinAccuracy=function(a){this.minaccuracy=a;return arel.Scene.updateObject(this.id,"MinAccuracy",a,arel.Util.toParameter({value:a},true))};this.getMinAccuracy=function(){return this.minaccuracy};this.setMaxDistance=function(a){this.maxdistance=a;return arel.Scene.updateObject(this.id,"MaxDistance",a,arel.Util.toParameter({value:a},true))};this.getMaxDistance=function(){return this.maxdistance};this.setMinDistance=function(a){this.mindistance=a;return arel.Scene.updateObject(this.id,"MinDistance",a,arel.Util.toParameter({value:a},true))};this.getMinDistance=function(){return this.mindistance};this.setState=function(a){this.state=a};this.getState=function(){return this.state};this.getVisibility=function(){return this.visibility};this.setVisibility=function(a,d,b){var c=[];if(a!==undefined){this.visibility.liveview=a;if(a){c.liveview="true"}else{c.liveview="false"}}if(d!==undefined){this.visibility.maplist=d;if(d){c.maplist="true"}else{c.maplist="false"}}if(b!==undefined){this.visibility.radar=b;if(b){c.radar="true"}else{c.radar="false"}}return arel.Scene.updateObject(this.id,"Visibility",undefined,arel.Util.toParameter(c,true))};this.getParameters=function(){return this.parameters};this.getParameter=function(a){if(this.parameters===undefined){return""}return this.parameters[a.toLowerCase()]};this.setParameters=function(a){this.parameters=a;return arel.Scene.updateObject(this.id,"Parameters",a,arel.Util.toParameter(a,true))};this.setParameter=function(d,a,c){var b=false;if(c){b=c}if(this.parameters){if(this.parameters[d.toLowerCase()]&&!b){return false}this.parameters[d.toLowerCase()]=a}else{this.parameters=[];this.parameters[d.toLowerCase()]=a}return arel.Scene.updateObject(this.id,"Parameters",this.parameters,arel.Util.toParameter(this.parameters,true))};this.isRendered=function(a,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.object.getIsRendered(arel.Util.toParameter({id:this.id,callbackid:c}))};this.applyProperties=function(a){if(a.hasOwnProperty("id")){this.id=a.id}if(a.hasOwnProperty("dynamicLightingEnabled")){this.dynamicLightingEnabled=a.dynamicLightingEnabled}if(a.hasOwnProperty("llaLimitsEnabled")){this.llaLimitsEnabled=a.llaLimitsEnabled}if(a.hasOwnProperty("title")){this.title=urldecode(a.title)}if(a.hasOwnProperty("location")){this.location=arel.Parser.parseLocation(a.location)}if(a.hasOwnProperty("iconPath")){this.iconPath=a.iconPath}if(a.hasOwnProperty("thumbnailPath")){this.thumbnailPath=a.thumbnailPath}if(a.hasOwnProperty("minaccuracy")){this.minaccuracy=a.minaccuracy}if(a.hasOwnProperty("maxdistance")){this.maxdistance=a.maxdistance}if(a.hasOwnProperty("mindistance")){this.mindistance=a.mindistance}if(a.hasOwnProperty("popup")){this.popup=arel.Parser.parsePopUp(a.popup,this.location)}if(a.hasOwnProperty("parameters")){this.parameters=arel.Parser.parseParameters(a.parameters)}if(a.hasOwnProperty("visibility")){this.visibility=a.visibility}if(a.hasOwnProperty("shadermaterial")){this.shadermaterial=a.shadermaterial}if(a.hasOwnProperty("parentobject")){this.parentobject=a.parentobject}if(a.type!==arel.Config.OBJECT_POI){if(a.hasOwnProperty("billboard")){this.billboard=a.billboard}if(a.hasOwnProperty("onscreen")){this.onscreen=arel.Parser.parseOnScreen(a.onscreen)}if(a.hasOwnProperty("rotation")){this.rotation=arel.Parser.parseRotation(a.rotation)}if(a.hasOwnProperty("translation")){this.translation=arel.Parser.parseTranslation(a.translation)}if(a.hasOwnProperty("scale")){this.scale=arel.Parser.parseScale(a.scale)}if(a.hasOwnProperty("occlusion")){this.occlusion=a.occlusion}if(a.hasOwnProperty("coordinateSystemID")){this.coordinateSystemID=a.coordinateSystemID}if(a.hasOwnProperty("model")){this.model=a.model}if(a.hasOwnProperty("texture")){this.texture=a.texture}if(a.hasOwnProperty("movie")){this.movie=a.movie}if(a.hasOwnProperty("transparency")){this.transparency=a.transparency}if(a.hasOwnProperty("renderorderposition")){this.renderorderposition=a.renderorderposition}if(a.hasOwnProperty("screenanchor")){this.screenanchor=a.screenanchor}if(a.hasOwnProperty("screenanchorflags")){this.screenanchorflags=a.screenanchorflags}if(a.hasOwnProperty("pickable")){this.pickable=a.pickable}}if(a.type===arel.Config.OBJECT_MODEL3D){if(a.hasOwnProperty("billboardModeEnabled")){this.billboardModEenabled=a.billboardModeEnabled}if(a.hasOwnProperty("renderOptions")){this.renderOptions=arel.Util.deepClone(a.renderOptions)}}if(a.type===arel.Config.OBJECT_LIGHT){if(a.hasOwnProperty("ambientColor")){this.ambientColor=arel.Parser.parseVector3d(a.ambientColor)}if(a.hasOwnProperty("attenuation")){this.attenuation=arel.Parser.parseVector3d(a.attenuation)}if(a.hasOwnProperty("diffuseColor")){this.diffuseColor=arel.Parser.parseVector3d(a.diffuseColor)}if(a.hasOwnProperty("direction")){this.direction=arel.Parser.parseVector3d(a.direction)}if(a.hasOwnProperty("enabled")){this.enabled=a.enabled}if(a.hasOwnProperty("radius")){this.radius=a.radius}if(a.hasOwnProperty("lightType")){this.lightType=a.lightType}}};this.toParameter=function(){var c=[];var k=undefined;if(this.TYPE){c.type=this.TYPE}if(this.id){c.id=this.id}if(this.billboardModeEnabled!==undefined){c.billboardModeEnabled=this.billboardModeEnabled}if(this.renderOptions!==undefined){c.renderOptions=JSON.stringify(this.renderOptions)}if(this.dynamicLightingEnabled!==undefined){c.dynamicLightingEnabled=this.dynamicLightingEnabled}if(this.llaLimitsEnabled!==undefined){c.llaLimitsEnabled=this.llaLimitsEnabled}if(this.title){c.title=this.title}if(this.location){var a=this.location.toParameterObject();for(k in a){if(typeof(a[k])!=="function"&&a[k]!==undefined){c[k]=a[k]}}}if(this.iconPath){c.iconPath=this.iconPath}if(this.thumbnailPath){c.thumbnailPath=this.thumbnailPath}if(this.maxdistance){c.maxdistance=this.maxdistance}if(this.mindistance){c.mindistance=this.mindistance}if(this.minaccuracy){c.minaccuracy=this.minaccuracy}if(this.popup){var d=this.popup.toParameterObject();for(k in d){if(typeof(d[k])!=="function"&&d[k]!==undefined){c[k]=d[k]}}}if(this.parameters!==undefined){for(var e in this.parameters){if(typeof(this.parameters[e])!=="function"){c["parameter_"+e]=this.parameters[e]}}}var h=true;for(var b in this.visibility){if(this.visibility.hasOwnProperty(b)){h=false;break}}if(!h){for(var e in this.visibility){if(typeof(this.visibility[e])!=="function"){c["visibility_"+e]=this.visibility[e]}}}if(this.TYPE!==arel.Config.OBJECT_POI){if(this.billboard!==undefined){c.billboard=this.billboard}if(this.onscreen){var l=this.onscreen.toParameterObject("onScreen");for(k in l){if(typeof(l[k])!=="function"&&l[k]!==undefined){c[k]=l[k]}}}if(this.translation&&!this.translation.isNULL()){var g=this.translation.toParameterObject("trans");for(k in g){if(typeof(g[k])!=="function"&&g[k]!==undefined){c[k]=g[k]}}}if(this.rotation&&!this.rotation.isNULL()){var f=this.rotation.toParameterObject("rot");for(k in f){if(typeof(f[k])!=="function"&&f[k]!==undefined){c[k]=f[k]}}}if(this.scale){var i=this.scale.toParameterObject("scale");for(k in i){if(typeof(i[k])!=="function"&&i[k]!==undefined){c[k]=i[k]}}}if(this.occlusion!==undefined&&this.occlusion){c.occlusion=this.occlusion}if(this.coordinateSystemID!==undefined){c.coordinateSystemID=this.coordinateSystemID}if(this.model){c.model=this.model}if(this.texture){c.texture=this.texture}if(this.movie){c.movie=this.movie}if(this.transparency!==undefined&&this.transparency>0){c.transparency=this.transparency}if(this.renderorderposition!==undefined){c.renderorderposition=this.renderorderposition}if(this.screenanchor!==undefined){c.screenanchor=this.screenanchor}if(this.screenanchorflags!==undefined){c.screenanchorflags=this.screenanchorflags}if(this.pickable!==undefined&&!this.pickable){c.pickable=this.pickable}if(this.shadermaterial!==undefined){c.shadermaterial=this.shadermaterial}if(this.parentobject!==undefined){c.parentobject=this.parentobject}if(this.imagedata!==undefined){c.imagedata=this.imagedata}}if(this.TYPE==arel.Config.OBJECT_LIGHT){if(this.ambientColor&&!this.ambientColor.isNULL()){var g=this.ambientColor.toParameterObject("ambientcolor");for(k in g){if(typeof(g[k])!=="function"&&g[k]!==undefined){c[k]=g[k]}}}if(this.attenuation&&!this.attenuation.isNULL()){var g=this.attenuation.toParameterObject("attenuation");for(k in g){if(typeof(g[k])!=="function"&&g[k]!==undefined){c[k]=g[k]}}}if(this.diffuseColor&&!this.diffuseColor.isNULL()){var g=this.diffuseColor.toParameterObject("diffusecolor");for(k in g){if(typeof(g[k])!=="function"&&g[k]!==undefined){c[k]=g[k]}}}if(this.direction&&!this.direction.isNULL()){var g=this.direction.toParameterObject("direction");for(k in g){if(typeof(g[k])!=="function"&&g[k]!==undefined){c[k]=g[k]}}}if(this.lightType!==undefined){c.lighttype=this.lightType}if(this.enabled!==undefined){c.enabled=this.enabled}if(this.radius!==undefined){c.radius=this.radius}}return arel.Util.toParameter(c)};this.toString=function(){return this.toParameter()}};arel.ObjectEvents={CATEGORY:arel.Config.OBJECT_EVENT_CATEGORY};arel.Popup=function(a){this.aButtons=[];this.text=undefined;this.setButtons=function(b){this.aButtons=b};this.getButtons=function(){return this.aButtons};this.setDescription=function(b){this.text=b};this.getDescription=function(){return this.text};this.addButton=function(b){this.aButtons[this.aButtons.length]=b};this.init=function(){if(a.buttons){for(var b in a.buttons){if(a.buttons[b] instanceof arel.PopupButton){this.addButton(a.buttons[b])}else{if(a.buttons[b].length===3){this.addButton(new arel.PopupButton(a.buttons[b][0],a.buttons[b][1],a.buttons[b][2]))}}}}if(a.description){this.setDescription(a.description)}};this.toParameterObject=function(){var c={};if(this.text){c.popupDescription=this.text}var d=this.getButtons();if(d!==undefined&&d.length>0){for(var b in d){if(d[b] instanceof arel.PopupButton){c["popupButtonName"+b]=d[b].name;c["popupButtonId"+b]=d[b].id;c["popupButtonValue"+b]=d[b].value}}}return c};this.init()};arel.PopupButton=function(a,c,b){this.name=undefined;this.id=undefined;this.value=undefined;this.init=function(){this.name=a;this.id=c;this.value=b};this.init()};arel.PopupAttributes={buttons:undefined,description:undefined};arel.Scene={CATEGORY:arel.Config.SCENE_CATEGORY,methodImplementations:{},applyMethodImplementations:function(d){var b=this.getObject(d);if(b!=false){var c=this.methodImplementations[d];for(var a in c){b[a]=c[a]}}},getHandEyeCalibration:function(c,d,a){arel.Debug.checkCompatibility(16,"arel.Scene.getHandEyeCalibration");if(typeof c==="function"){arel.Debug.error('arel.Scene.getHandEyeCalibration: "cameraType" parameter is not optional anymore (breaking change)');return false}var b=arel.CallbackInterface.addCallbackFunction(d,a);if(!b){return arel.Error.write("Invalid callback given")}return arel.ClientInterface.scene.getHandEyeCalibration(c,b)},getObjects:function(){return arel.ObjectCache.getObjects()},getObjectsFromCoordinateSystem:function(d){var a=arel.ObjectCache.getObjects();var c=[];for(var b in a){if(typeof(a[b]!=="function")){if(a[b].hasOwnProperty("getCoordinateSystemID")){if(a[b].getCoordinateSystemID()==d){c.push(a[b])}}}}return c},getID:function(){return arel.SceneCache.id},getAppAPILevel:function(){return arel.SceneCache.appAPILevel},getIDFromClient:function(){var a=arel.CallbackInterface.addCallbackFunction(_callback,caller);if(!a){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getID(a)},setAnnotationsBottomPadding:function(a){arel.Debug.checkCompatibility(16,"arel.Scene.setAnnotationsBottomPadding");return arel.ClientInterface.scene.setAnnotationsBottomPadding(a)},setObjects:function(a){this.removeObjects();arel.ObjectCache.setObjects(a);a=arel.ObjectCache.getObjects();for(var b in a){if(a[b] instanceof arel.Object){arel.ClientInterface.scene.addObject(a[b])}}},removeObjects:function(){arel.ObjectCache.removeObjects();return arel.ClientInterface.scene.removeObjects()},addObject:function(a){if(arel.ObjectCache.addObject(a)){return arel.ClientInterface.scene.addObject(a)}else{return arel.Error.write("Object could not be added to the scene.")}},getObject:function(a){return arel.ObjectCache.getObject(a)},removeObject:function(a){var b=undefined;if(a instanceof arel.Object){b=a.getID()}else{b=a}if(b!==undefined){arel.ObjectCache.removeObject(b);return arel.ClientInterface.scene.removeObject(b)}else{return false}},getNumberOfObjects:function(){return arel.Util.numberOfArelObjects(arel.ObjectCache.getObjects())},switchChannel:function(b,a){var c="";if(a!==undefined){c=arel.Util.toParameter(a,true)}return arel.ClientInterface.scene.switchChannel(b,c)},setAmbientLight:function(a){if(!(a instanceof arel.Vector3D)){return arel.Error.write("_ambientColor must be of type arel.Vector3D")}return arel.ClientInterface.scene.setAmbientLight(a)},setTrackingConfiguration:function(b,a){if(b!==arel.Tracking.MARKERLESS_3D&&b!==arel.Tracking.MARKERLESS_2D&&b!==arel.Tracking.MARKER&&b!==arel.Tracking.STATE_TRACKING&&b!==arel.Tracking.STATE_NOTTRACKING){return arel.ClientInterface.scene.setTrackingConfiguration(b,a)}return arel.Error.write("invalid tracking type given.")},setClippingPlaneLimits:function(b,a){arel.Debug.logStream("Set clipping plane limits to: "+b+" / "+a);var c=arel.ClientInterface.protocol+"scene/setClippingPlaneLimits/?near="+b+"&far="+a;return arel.ClientInterface.out(c)},setLLAObjectRenderingLimits:function(b,a){arel.Debug.logStream("Set LLAObjectRenderingLimits to: "+b+" / "+a);var c=arel.ClientInterface.protocol+"scene/setLLAObjectRenderingLimits/?near="+b+"&far="+a;return arel.ClientInterface.out(c)},loadShaderMaterials:function(c,a,b){var d=undefined;if(a!==undefined){arel.Debug.checkCompatibility(16,"arel.Scene.loadShaderMaterials with callback");d=arel.CallbackInterface.addCallbackFunction(a,b);if(!d){return arel.Error.write("Invalid callback given")}}return arel.ClientInterface.scene.loadShaderMaterials(c,d)},loadEnvironmentMap:function(a){return arel.ClientInterface.scene.loadEnvironmentMap(a)},startCamera:function(a,c,g,b,f){var e=null;if(a instanceof arel.Camera){if(c){e=arel.CallbackInterface.addCallbackFunction(function(h){c.call(this,h[0],arel.Camera.fromJSONObject(h[1]))},g);if(!e){return arel.Error.write("Invalid callback given")}}return arel.ClientInterface.scene.startCamera(a,e)}else{if(typeof(a)==="string"){arel.Debug.logStream("Starting camera with facing "+a);if(c){e=arel.CallbackInterface.addCallbackFunction(function(h){c.call(this,h[0])},g);if(!e){return arel.Error.write("Invalid callback given")}}var d=arel.ClientInterface.protocol+arel.ClientInterface.scene.sceneTerm+"/startCameraWithFacing?facing="+encodeURIComponent(a);if(e!==null){d+="&callbackid="+e}return arel.ClientInterface.out(d)}else{if(typeof(a)==="undefined"){a=0}if(typeof(c)==="undefined"){c=320}if(typeof(g)==="undefined"){g=240}if(typeof(b)==="undefined"){b=1}if(typeof(f)==="undefined"){f=true}return arel.ClientInterface.scene.startCamera(a,c,g,b,f)}}},stopCamera:function(){return arel.ClientInterface.scene.stopCamera()},startTorch:function(){return arel.ClientInterface.scene.startTorch()},stopTorch:function(){return arel.ClientInterface.scene.stopTorch()},setFreezeTracking:function(a){return arel.ClientInterface.scene.setFreezeTracking(a)},triggerServerCall:function(c,d,b){if(c){this.removeObjects()}for(var a in d){if(a.indexOf("filter_")===-1){delete d[a]}}if(b===true){d.sendScreenshot="true"}return arel.ClientInterface.scene.triggerServerCall(arel.Util.toParameter(d))},setLocation:function(a){return arel.ClientInterface.scene.setLocation(arel.Util.toParameter(a.toParameterObject()))},resetLocation:function(){var a=arel.ClientInterface.protocol+"scene/resetLocation";return arel.ClientInterface.out(a)},getLocation:function(a,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getLocation(c)},getCompassRotation:function(a,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getCompassRotation(c)},getTrackingValues:function(c,d,a){if(typeof c==="function"){a=d;d=c;c=false}var b=arel.CallbackInterface.addCallbackFunction(d,a);if(!b){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getTrackingValues(c,b)},getAllObjectsFromViewportCoordinates:function(g,a,d,f,b){arel.Debug.checkCompatibility(16,"arel.Scene.getAllObjectsFromViewportCoordinates");if(g===undefined||!(g instanceof arel.Vector2D)){return arel.Error.write("No viewport coordinates given or viewport coordinates of wrong type")}if(g.getX()<-0.1||g.getX()>1.1||g.getY()<-0.1||g.getY()>1.1){arel.Debug.logStream("Viewport coordinates for getAllObjectsFromViewportCoordinates call seem invalid, must be in range [0,1)")}if(a===undefined){a=false}if(d===undefined){d=0}var e=function(k){for(var h=0;h<k.length;++h){var j=k[h].cosCoordinates;k[h].cosCoordinates=new arel.Vector3D(j.x,j.y,j.z);j=k[h].objectCoordinates;k[h].objectCoordinates=new arel.Vector3D(j.x,j.y,j.z)}return f.call(this,k)};var c=arel.CallbackInterface.addCallbackFunction(e,b);if(!c){return arel.Error.write("Invalid callback given")}return arel.ClientInterface.scene.getAllObjectsFromViewportCoordinates(g,a,d,c)},getCameraImageCoordinatesFrom3DPosition:function(e,a,f,b){arel.Debug.checkCompatibility(17,"arel.Scene.getCameraImageCoordinatesFrom3DPosition");if(!(a instanceof arel.Vector3D)){return arel.Error.write("getCameraImageCoordinatesFrom3DPosition: point must be of type arel.Vector3D")}var d=function(g){g=new arel.Vector2D(g.x,g.y);return f.call(this,g)};var c=arel.CallbackInterface.addCallbackFunction(d,b);if(!c){return arel.Error.write("Invalid callback given")}return arel.ClientInterface.scene.getCameraImageCoordinatesFrom3DPosition(e,a,c)},getObjectFromScreenCoordinates:function(c,a,b){if(arel.SceneCache.appAPILevel!==undefined&&arel.SceneCache.appAPILevel>=16){arel.Debug.logStream("arel.Scene.getObjectFromScreenCoordinates is deprecated, please use new name arel.Scene.getObjectFromViewportCoordinates instead")}return arel.Scene.getObjectFromViewportCoordinates.apply(this,arguments)},getObjectFromViewportCoordinates:function(c,a,b){if(c===undefined||!(c instanceof arel.Vector2D)){return arel.Error.write("No viewport coordinates given or viewport coordinates of wrong type")}var d=arel.CallbackInterface.addCallbackFunction(a,b);if(!d){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getObjectFromViewportCoordinates(arel.Util.toParameter(c),d)},get3DPositionFromScreenCoordinates:function(b,d,a,c){if(arel.SceneCache.appAPILevel!==undefined&&arel.SceneCache.appAPILevel>=16){arel.Debug.logStream("arel.Scene.get3DPositionFromScreenCoordinates is deprecated, please use new name arel.Scene.get3DPositionFromViewportCoordinates instead")}return arel.Scene.get3DPositionFromViewportCoordinates.apply(this,arguments)},get3DPositionFromViewportCoordinates:function(b,e,a,d){if(b===undefined||!(b instanceof arel.Vector2D)){return arel.Error.write("No viewport coordinates given or viewport coordinates of wrong type")}var c=arel.CallbackInterface.addCallbackFunction(a,d);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.get3DPositionFromViewportCoordinates(arel.Util.toParameter(b),e,c)},getScreenCoordinatesFrom3DPosition:function(b,d,a,c){if(arel.SceneCache.appAPILevel!==undefined&&arel.SceneCache.appAPILevel>=16){arel.Debug.logStream("arel.Scene.getScreenCoordinatesFrom3DPosition is deprecated, please use new name arel.Scene.getViewportCoordinatesFrom3DPosition instead")}return arel.Scene.getViewportCoordinatesFrom3DPosition.apply(this,arguments)},getViewportCoordinatesFrom3DPosition:function(b,e,a,d){if(b===undefined||!(b instanceof arel.Vector3D)){return arel.Error.write("No 3d coordinates given or not of type arel.Vector3D")}var c=arel.CallbackInterface.addCallbackFunction(a,d);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getViewportCoordinatesFrom3DPosition(arel.Util.toParameter(b),e,c)},updateObject:function(g,c,f,b,a){if(a===undefined){a=false}if(g!==undefined){if(arel.ObjectCache.objectExists(g)){var e=this.getObject(g);e.setID(new Date().valueOf()+"_"+arel.objectIdIterator);var d=e.getState();arel.objectIdIterator++;if(a){e["set"+c].apply(f)}else{e["set"+c](f)}e.setID(g);arel.ObjectCache.addObject(e,true);arel.ObjectCache.setObjectState(g,d);return arel.ClientInterface.object.edit(g,c,b)}}},getScreenshot:function(a,f,e,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}var d={};d.callbackid=c;d.includeRender=f;d.bboxX=e.getX();d.bboxY=e.getY();return arel.ClientInterface.scene.getScreenshot(arel.Util.toParameter(d))},sensorCommand:function(d,b,a){var c=arel.CallbackInterface.addCallbackFunction(a);if(!c){return arel.Error.write("invalid callback given.")}var e={};e.callbackid=c;e.command=d;e.parameter=b;return arel.ClientInterface.scene.sensorCommand(arel.Util.toParameter(e))},objectExists:function(a){var b=a;if(a instanceof arel.Object){b=a.getID()}return arel.ObjectCache.objectExists(b)},startInstantTracking:function(a,b){var c={};c.value=a;c.preview=b;return arel.ClientInterface.scene.startInstantTracking(arel.Util.toParameter(c))},shareScreenshot:function(a){if(a!==undefined){return arel.ClientInterface.scene.shareScreenshot(a)}return arel.ClientInterface.scene.shareScreenshot(false)},shareImage:function(a,b){arel.Debug.checkCompatibility(17,"arel.Scene.shareImage");if(b!==undefined){return arel.ClientInterface.scene.shareImage(a,b)}return arel.ClientInterface.scene.shareImage(a,false)},requestVisualSearch:function(d,c,b){var a=c;if(c===undefined){a=true}return arel.ClientInterface.scene.requestVisualSearch(d,a,b)},setCameraParametersFromValues:function(b,a,d,c,e){arel.Debug.checkCompatibility(17,"arel.Scene.setCameraParametersFromValues");return arel.ClientInterface.scene.setCameraParametersFromValues(b,a,d,c,e)},setCameraParametersFromXML:function(b,a){arel.Debug.checkCompatibility(17,"arel.Scene.setCameraParametersFromXML");return arel.ClientInterface.scene.setCameraParametersFromXML(b,a)},setHandEyeCalibration:function(c,a,b){arel.Debug.checkCompatibility(16,"arel.Scene.setHandEyeCalibration");if(b===undefined){arel.Debug.error('arel.Scene.setHandEyeCalibration: "cameraType" parameter is not optional anymore (breaking change)');return false}return arel.ClientInterface.scene.setHandEyeCalibration(c,a,b)},setHandEyeCalibrationByDevice:function(a,b){arel.Debug.checkCompatibility(18,"arel.Scene.setHandEyeCalibrationByDevice");var d=undefined;if(a!==undefined){d=arel.CallbackInterface.addCallbackFunction(a,b);if(!d){return arel.Error.write("Invalid callback given")}}var c=arel.ClientInterface.protocol+arel.ClientInterface.scene.sceneTerm+"/setHandEyeCalibrationByDevice/";if(d!==undefined){c+="?callbackid="+d}return arel.ClientInterface.out(c)},setHandEyeCalibrationFromFile:function(c,a,b){arel.Debug.checkCompatibility(18,"arel.Scene.setHandEyeCalibrationFromFile");if(typeof c==="function"){b=a;a=c;c=undefined}var e=undefined;if(a!==undefined){e=arel.CallbackInterface.addCallbackFunction(a,b);if(!e){return arel.Error.write("Invalid callback given")}}var f={};if(c!==undefined){f.url=c}if(e!==undefined){f.callbackid=e}var d=arel.ClientInterface.protocol+arel.ClientInterface.scene.sceneTerm+"/setHandEyeCalibrationFromFile/"+arel.Util.toParameter(f,false);return arel.ClientInterface.out(d)},setPickingSoundEnabled:function(a){return arel.ClientInterface.scene.setPickingSoundEnabled(a)},setSeeThrough:function(a){if(typeof(a)==="undefined"){a=true}return arel.ClientInterface.scene.setSeeThrough(a)},setSeeThroughColor:function(a){if(!(a instanceof arel.Vector4D)){return arel.Error.write("_seeThroughColor must be of type arel.Vector4D")}return arel.ClientInterface.scene.setSeeThroughColor(a)},setStereoRendering:function(a){if(a===undefined){a=true}return arel.ClientInterface.scene.setStereoRendering(a)},setAdvancedRenderingFeatures:function(a){if(typeof(a)==="undefined"){_enable=true}return arel.ClientInterface.scene.setAdvancedRenderingFeatures(a)},autoEnableAdvancedRenderingFeatures:function(a,c){var b=arel.CallbackInterface.addCallbackFunction(a,c);if(!b){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.autoEnableAdvancedRenderingFeatures(b)},isAdvancedRenderingSupported:function(c,a){var b=arel.CallbackInterface.addCallbackFunction(c,a);if(!b){return arel.Error.write("Invalid callback given")}return arel.ClientInterface.scene.isAdvancedRenderingSupported(b)},setDepthOfFieldParameters:function(c,b,a){if(typeof(c)==="undefined"){c=0.1}if(typeof(b)==="undefined"){b=0.6}if(typeof(a)==="undefined"){a=0.2}return arel.ClientInterface.scene.setDepthOfFieldParameters(c,b,a)},setMotionBlurIntensity:function(a){if(typeof(a)==="undefined"){a=true}return arel.ClientInterface.scene.setMotionBlurIntensity(a)}};arel.GestureHandler={CATEGORY:arel.Config.GESTUREHANDLER_CATEGORY,addObject:function(a,b){return arel.ClientInterface.scene.gestureHandlerAddObject(a,b)},removeObject:function(a){return arel.ClientInterface.scene.gestureHandlerRemoveObject(a)},removeObjects:function(){return arel.ClientInterface.scene.gestureHandlerRemoveAllObjects()},getGestures:function(a,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.gestureHandlerGetGestures(c)},enableGestures:function(a){return arel.ClientInterface.scene.gestureHandlerEnableGestures(a)},setRotationAxis:function(a){arel.Debug.logStream("Setting rotation axis for gesture handler: "+a);var b=arel.ClientInterface.protocol+arel.ClientInterface.scene.sceneTerm+"/gesturehandler/?action=setrotationaxis&axis="+a;return arel.ClientInterface.out(b)}};arel.Events={DELIMITER:"::",REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS:/[^a-zA-Z0-9_]+/g,Scene:{ONLOAD:"onload",ONREADY:"onready",ONTRACKING:"ontracking",ONLOCATIONUPDATE:"onlocationupdate",ONVISUALSEARCHRESULT:"onvisualsearchresult"},Object:{ONTOUCHSTARTED:"ontouchstart",ONTOUCHENDED:"ontouchend",ONLOAD:"onload",ONREADY:"onready",ONANIMATIONENDED:"onanimationend",ONMOVIEENDED:"onmovieend",ONTRANSLATED:"ontranslated",ONSCALED:"onscaled",ONROTATED:"onrotated",ONVISIBLE:"ONVISIBLE",ONINVISIBLE:"ONINVISIBLE"},Media:{ONCLOSED:"onclose",ONSOUNDPLAYBACKCOMPLETE:"SOUND_COMPLETE",WEBSITE_CLOSED:"WEBSITE_CLOSED",VIDEO_CLOSED:"VIDEO_CLOSED",SOUND_COMPLETE:"SOUND_COMPLETE",CALENDAREVENT_DONE:"CALENDAREVENT_DONE"},GestureHandler:{TRANSLATING_START:"translating_start",TRANSLATING_END:"translating_end",SCALING_START:"scaling_start",SCALING_END:"scaling_end",ROTATING_START:"rotating_start",ROTATING_END:"rotating_end"},sceneEvents:{scene_onload:function(){return arel.Scene.setOptions()}},objectEvents:{},mediaEvents:{},gestureHandlerEvents:{},setListener:function(b,d,a){var c=undefined;if(typeof(b)!=="string"){c=b.CATEGORY}else{if(this.getMediaType(b)){c=this.getMediaType(b)}}if(b instanceof arel.Object){arel.Debug.logStream("Setting object listener");if(b.getID()===undefined){return arel.Error.write("Object ID unknown.")}c+=this.DELIMITER+b.getID();if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.objectEvents[c]=[d,a]}else{if(b.CATEGORY===arel.Config.SCENE_CATEGORY){arel.Debug.logStream("Setting scene listener");if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.sceneEvents[c]=[d,a]}else{if(b.CATEGORY===arel.Config.OBJECT_EVENT_CATEGORY){arel.Debug.logStream("Setting global object listener");if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.objectEvents[c]=[d,a]}else{if(b.CATEGORY===arel.Config.GESTUREHANDLER_CATEGORY){arel.Debug.logStream("Setting gesture handler listener");if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.gestureHandlerEvents[c]=[d,a]}else{if(b.CATEGORY===arel.Config.MEDIA_CATEGORY){arel.Debug.logStream("Setting Media listener");if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.mediaEvents[c]=[d,a]}else{if(this.getMediaType(b)){arel.Debug.logStream("Setting media listener");c+=this.DELIMITER+b.replace(this.REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS,"");c=c.toLowerCase();if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.mediaEvents[c]=[d,a]}else{return arel.Error.write("Unknown Element type: "+b)}}}}}}return c},removeListener:function(c){var f=undefined;if(c instanceof arel.Object){f=c.CATEGORY+this.DELIMITER+c.getID()}else{if(c.CATEGORY===arel.Config.SCENE_CATEGORY){f=c.CATEGORY}else{if(c.CATEGORY===arel.Config.OBJECT_EVENT_CATEGORY){f=c.CATEGORY}else{if(c.CATEGORY===arel.Config.MEDIA_CATEGORY){f=c.CATEGORY}else{if(c.CATEGORY===arel.Config.GESTUREHANDLER_CATEGORY){f=c.CATEGORY}else{if(this.getMediaType(c)){f=this.getMediaType(c)+this.DELIMITER+c.replace(this.REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS,"")}else{if(typeof(c)==="string"){f=c}else{return arel.Error.write("no valid event ID or element given")}}}}}}}var b=f.split(this.DELIMITER);try{var a=b[0]}catch(d){return arel.Error.write("An incorrect event ID was passed.")}if(a!==undefined&&a===arel.Config.OBJECT_INTERFACE_CATEGORY){arel.Debug.logStream("Removing object listener");if(this.objectEvents[f]===undefined){return false}delete (this.objectEvents[f])}else{if(a!==undefined&&a===arel.Config.SCENE_CATEGORY){arel.Debug.logStream("Removing scene listener");if(this.sceneEvents[f]===undefined){return false}delete (this.sceneEvents[f])}else{if(a!==undefined&&a===arel.Config.OBJECT_EVENT_CATEGORY){arel.Debug.logStream("Removing object listener");if(this.objectEvents[f]===undefined){return false}delete (this.objectEvents[f])}else{if(a!==undefined&&this.validateMediaType(a)){arel.Debug.logStream("Removing media listener");f=f.toLowerCase();if(this.mediaEvents[f]===undefined){return false}delete (this.mediaEvents[f])}else{if(a!==undefined&&a===arel.Config.GESTUREHANDLER_CATEGORY){arel.Debug.logStream("Removing gesture handler listener");if(this.gestureHandlerEvents[f]===undefined){return false}delete (this.gestureHandlerEvents[f])}else{return false}}}}}return true},validateMediaType:function(a){return a===arel.Media.URL||a===arel.Media.SOUND||a===arel.Media.VIDEO},getMediaType:function(a){if(typeof(a)==="string"){var b=a.toLowerCase();if(b.indexOf(".mp4")!==-1||b.indexOf(".3g2")!==-1||b.indexOf(".3gp")!==-1){return arel.Media.VIDEO}else{if(b.indexOf(".mp3")!==-1){return arel.Media.SOUND}else{if(b.indexOf(".png")!==-1||b.indexOf(".jpg")!==-1||b.indexOf(".jpeg")!==-1||b.indexOf(".gif")!==-1){return arel.Media.WEBSITE}else{if(b.indexOf("http://")!==-1||b.indexOf("https://")!==-1||b.indexOf("html")!==-1||b.indexOf("php")!==-1||b.indexOf("htm")!==-1){return arel.Media.WEBSITE}else{return false}}}}}else{return false}},call:function(a,c,b){if(a===undefined){return false}if(a[0]===undefined||typeof(a[0])!=="function"){return arel.Error.write("Event callback function undefined or not a function.")}if(a[1]!==undefined){a[0].call(a[1],c,b)}else{a[0](c,b)}return true},callSceneEvent:function(c,f){if(c===arel.Events.Scene.ONREADY||c===arel.Events.Scene.ONLOAD){if(f!==undefined){if(f.id!==undefined){arel.SceneCache.id=f.id}if(f.apilevel!==undefined){arel.SceneCache.appAPILevel=f.apilevel}}if(c===arel.Events.Scene.ONREADY){arel.sceneIsReadyForExecution()}}if(c===arel.Events.Scene.ONTRACKING){for(var a in f){var d=arel.Scene.getObjectsFromCoordinateSystem(f[a].getCoordinateSystemID());for(var e in d){if(d[e]&&d[e].onTrackingEvent){d[e].onTrackingEvent(f[a])}}}}arel.Debug.logStream("Scene event received. Type: "+c);var b=arel.Config.SCENE_CATEGORY;return arel.Events.call(this.sceneEvents[b],c,f)},callGestureEvent:function(c,b,e){arel.Debug.logStream("Gesture event received. Type: "+c);var g=new Array();for(var a in e){var d=arel.Scene.getObject(e[a]);if(d){g.push(d)}}var f=this.gestureHandlerEvents[arel.Config.GESTUREHANDLER_CATEGORY];if(f!==undefined){f[0].call(f[1],c,b,g);return true}return false},callGlobalMediaEvent:function(b,c){arel.Debug.logStream("Media event received. Type: "+b);var a=arel.Config.MEDIA_CATEGORY;return arel.Events.call(this.mediaEvents[a],b,c)},callObjectEvent:function(g,e,f){arel.Debug.logStream("Object event received for object "+g+". Type: "+e);var d=arel.Config.OBJECT_INTERFACE_CATEGORY+this.DELIMITER+g;if(e===arel.Events.Object.ONLOAD&&f!==undefined){if(!arel.ObjectCache.objectExists(g)){arel.ObjectCache.addObject(f)}else{arel.ObjectCache.getObject(g).applyProperties(f)}}else{if(e===arel.Events.Object.ONREADY){if(arel.ObjectCache.objectExists(g)){arel.Scene.applyMethodImplementations(g);arel.ObjectCache.setObjectStateToReady(g);arel.ClientInterface.queueCachedObjectRequests(g);var b=arel.Scene.getObject(g);if(b&&b.onReady){b.onReady()}}}else{if(e===arel.Events.Object.ONTOUCHSTARTED){var b=arel.Scene.getObject(g);if(b&&b.onTouchStarted){b.onTouchStarted()}}else{if(e===arel.Events.Object.ONTOUCHENDED){var b=arel.Scene.getObject(g);if(b&&b.onTouchEnded){b.onTouchEnded()}}else{if(e===arel.Events.Object.ONTRANSLATED){var b=arel.Scene.getObject(g);if(b){b.setTranslation(f.translation);if(b.onTranslated){b.onTranslated(f.translation)}}}else{if(e===arel.Events.Object.ONSCALED){var b=arel.Scene.getObject(g);if(b){b.setScale(f.scale);if(b.onScaled){b.onScaled(f.scale)}}}else{if(e===arel.Events.Object.ONROTATED){var b=arel.Scene.getObject(g);if(b){b.setRotation(f.rotation);if(b.onRotated){b.onRotated(f.rotation)}}}else{if(e===arel.Events.Object.ONANIMATIONENDED){var b=arel.Scene.getObject(g);if(b&&b.onAnimationEnded){b.onAnimationEnded(f.animationname)}}else{if(e===arel.Events.Object.ONMOVIEENDED){var b=arel.Scene.getObject(g);if(b&&b.onMovieEnded){b.onMovieEnded(f.moviename)}}else{if(e===arel.Events.Object.ONVISIBLE){var b=arel.Scene.getObject(g);if(b&&b.onVisible){b.onVisible()}}else{if(e===arel.Events.Object.ONINVISIBLE){var b=arel.Scene.getObject(g);if(b&&b.onInvisible){b.onInvisible()}}}}}}}}}}}}var c=this.objectEvents[arel.Config.OBJECT_EVENT_CATEGORY];if((c!==undefined)&&(c[0]!==undefined)&&typeof(c[0]==="function")){c[0](arel.Scene.getObject(g),e,f)}var a=this.objectEvents[d];if(a===undefined){return false}if(a[0]===undefined||typeof(a[0])!=="function"){return arel.Error.write("Event callback function undefined or not a function.")}if(a[1]!==undefined){a[0].call(a[1],arel.Scene.getObject(g),e,f)}else{a[0](arel.Scene.getObject(g),e,f)}return true},callMediaEvent:function(a,c){arel.Debug.logStream("Media event received. Type: "+c);var b=this.getMediaType(a)+this.DELIMITER+a.replace(this.REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS,"");b=b.toLowerCase();return arel.Events.call(this.mediaEvents[b],c,a)},trigger:function(f,d,h){var c=undefined;if(f instanceof arel.Object&&d!==undefined){c=f.CATEGORY+this.DELIMITER+f.getID()}else{if(f.CATEGORY===arel.Config.SCENE_CATEGORY&&d!==undefined){c=f.CATEGORY}else{if(f.CATEGORY===arel.Config.MEDIA_CATEGORY&&d!==undefined){c=f.CATEGORY}else{if(this.getMediaType(f)&&d!==undefined){c=this.getMediaType(f)+this.DELIMITER+f.replace(this.REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS,"")}else{if(d!==undefined){c=f}else{return arel.Error.write("no valid event ID or element given")}}}}}var b=c.split(this.DELIMITER);try{var a=b[0]}catch(g){return arel.Error.write("An incorrect event listener ID was passed.")}if(a!==undefined&&a===arel.Config.OBJECT_INTERFACE_CATEGORY){return this.callObjectEvent(b[1],d,h)}else{if(a!==undefined&&a===arel.Config.SCENE_CATEGORY){return this.callSceneEvent(d,h)}else{if(a!==undefined&&this.validateMediaType(a)){return this.callMediaEvent(b[1],d,h)}else{return arel.Error.write("IdType is unknown - "+a)}}}}};arel.Camera=function(){this.index=-1;this.friendlyName="";this.resolution=new arel.Vector2D(320,240);this.fps=new arel.Vector2D(0,0);this.downsample=1;this.yuvPipeline=true;this.facing=arel.Camera.FACE_UNDEFINED;this.flip=arel.Camera.FLIP_NONE;this.getIndex=function(){return this.index};this.setIndex=function(a){this.index=a};this.getFriendlyName=function(){return this.friendlyName};this.setFriendlyName=function(a){this.friendlyName=a};this.getResolution=function(){return this.resolution};this.setResolution=function(a){this.resolution=a};this.getFps=function(){return this.fps};this.setFps=function(a){this.fps=a};this.getDownsample=function(){return this.downsample};this.setDownsample=function(a){this.downsample=a};this.isYuvPipeline=function(){return this.yuvPipeline};this.setYuvPipeline=function(a){this.yuvPipeline=a};this.getFacing=function(){return this.facing};this.setFacing=function(a){this.facing=a};this.getFlip=function(){return this.flip};this.setFlip=function(a){this.flip=a};this.toJSON=function(){return JSON.stringify({index:this.index,friendlyName:this.friendlyName,resolution:this.resolution.toJSONObject(),fps:this.fps.toJSONObject(),downsample:this.downsample,yuvPipeline:this.yuvPipeline,facing:this.facing,flip:this.flip})}};arel.Camera.fromJSONObject=function(b){if(!b.hasOwnProperty("index")){arel.Error.write("Invalid JSON structure");return null}var d=new arel.Camera();var c=["index","friendlyName","yuvPipeline","facing","flip"];for(var a=0;a<c.length;++a){d[c[a]]=b[c[a]]}if(typeof(d.facing)==="number"){if(d.facing==0){d.facing=arel.Camera.FACE_UNDEFINED}else{if(d.facing==1){d.facing=arel.Camera.FACE_BACK}else{if(d.facing==2){d.facing=arel.Camera.FACE_FRONT}else{arel.Debug.error("Invalid camera facing")}}}}d.fps=new arel.Vector2D(b.fps.x,b.fps.y);d.resolution=new arel.Vector2D(b.resolution.x,b.resolution.y);return d};arel.Camera.FACE_UNDEFINED="FACE_UNDEFINED";arel.Camera.FACE_BACK="FACE_BACK";arel.Camera.FACE_FRONT="FACE_FRONT";arel.Camera.FLIP_NONE=0;arel.Camera.FLIP_VERTICAL=1;arel.Camera.FLIP_HORIZONTAL=2;arel.Camera.FLIP_BOTH=3;arel.Vector3D=function(c,b,a){this.x=c;this.y=b;this.z=a;this.toString=function(){return this.x+","+this.y+","+this.z};this.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))};this.normalized=function(){var d=this.getLength();if(d==0){return this}return new arel.Vector3D(this.x/d,this.y/d,this.z/d)};this.setX=function(d){this.x=d};this.setY=function(d){this.y=d};this.setZ=function(d){this.z=d};this.getX=function(){return this.x};this.getY=function(){return this.y};this.getZ=function(){return this.z};this.toParameterObject=function(e){if(e===undefined){e=""}var d={};d[e+"X"]=this.getX();d[e+"Y"]=this.getY();d[e+"Z"]=this.getZ();return d};this.isNULL=function(){if(!this.getX()&&!this.getY()&&!this.getZ()){return true}if(this.getX()===0&&this.getY()===0&&this.getZ()===0){return true}}};arel.Vector3D.add=function(c,b){var a=new arel.Vector3D();a.setX(c.getX()+b.getX());a.setY(c.getY()+b.getY());a.setZ(c.getZ()+b.getZ());return a};arel.Vector3D.subtract=function(c,b){var a=new arel.Vector3D();a.setX(c.getX()-b.getX());a.setY(c.getY()-b.getY());a.setZ(c.getZ()-b.getZ());return a};arel.Vector3D.scalarProduct=function(b,a){return b.getX()*a.getX()+b.getY()*a.getY()+b.getZ()*a.getZ()};arel.Vector3D.getAngleBetweenVectors=function(b,a){var c=arel.Vector3D.scalarProduct(b,a)/(b.getLength()*a.getLength());c=c>1&&c<1.0000001?1:c;c=c<-1&&c>1.0000001?-1:c;return Math.acos(c)};arel.Vector3D.crossProduct=function(c,b){var a=new arel.Vector3D();a.setX(c.getY()*b.getZ()-c.getZ()*b.getY());a.setY(c.getZ()*b.getX()-c.getX()*b.getZ());a.setZ(c.getX()*b.getY()-c.getY()*b.getX());return a};arel.Rotation=function(a,d,c,b){this.init=function(e,h,g,f){if(e!==undefined){this.setX(e)}if(h!==undefined){this.setY(h)}if(g!==undefined){this.setZ(g)}if(f!==undefined){this.setW(f)}};this.getAxisAngle=function(){if(this.getW()>1){var f=Math.sqrt(Math.pow(this.getX(),2)+Math.pow(this.getY(),2)+Math.pow(this.getZ(),2)+Math.pow(this.getW(),2));this.setX(this.getX()/f);this.setY(this.getY()/f);this.setZ(this.getZ()/f);this.setW(this.getW()/f)}var h=2*Math.acos(this.getW());var g=Math.sqrt(1-Math.pow(this.getW(),2));var e=new arel.Vector3D();if(g<0.001){e=new arel.Vector3D(this.getX(),this.getY(),this.getZ())}else{e=new arel.Vector3D(this.getX()/g,this.getY()/g,this.getZ()/g)}return{axis:e,angle:h}};this.setFromAxisAngle=function(e,g){var f=Math.sin(g/2);this.init(e.getX()*f,e.getY()*f,e.getZ()*f,Math.cos(g/2))};this.getEulerAngleDegrees=function(){return arel.Util.vec3DToDeg(this.getEulerAngleRadians())};this.getEulerAngleRadians=function(){var i=Math.pow(this.getW(),2);var g=Math.pow(this.getX(),2);var f=Math.pow(this.getY(),2);var e=Math.pow(this.getZ(),2);var h=new arel.Vector3D();h.setZ(Math.atan2(2*(this.getX()*this.getY()+this.getZ()*this.getW()),(g-f-e+i)));h.setX(Math.atan2(2*(this.getY()*this.getZ()+this.getX()*this.getW()),(-g-f+e+i)));h.setY(Math.asin(arel.Util.clamp(-2*(this.getX()*this.getZ()-this.getY()*this.getW()),-1,1)));return h};this.setFromEulerAngleRadians=function(h){var k;k=h.getX()*0.5;var e=Math.sin(k);var m=Math.cos(k);k=h.getY()*0.5;var g=Math.sin(k);var o=Math.cos(k);k=h.getZ()*0.5;var p=Math.sin(k);var j=Math.cos(k);var q=o*j;var n=g*j;var i=o*p;var f=g*p;this.setX(e*q-m*f);this.setY(m*n+e*i);this.setZ(m*i-e*n);this.setW(m*q+e*f);if(this.getW()>1){var l=Math.sqrt(Math.pow(this.getX(),2)+Math.pow(this.getY(),2)+Math.pow(this.getZ(),2)+Math.pow(this.getW(),2));this.setX(this.getX()/l);this.setY(this.getY()/l);this.setZ(this.getZ()/l);this.setW(this.getW()/l)}};this.setFromEulerAngleDegrees=function(e){this.setFromEulerAngleRadians(arel.Util.vec3DToRad(e))};this.getMatrix=function(){var e=[];var i=Math.pow(this.getW(),2);var h=Math.pow(this.getX(),2);var g=Math.pow(this.getY(),2);var f=Math.pow(this.getZ(),2);if(Math.abs(h+g+f+i-1)>0.001){return arel.Error.write("Quaternion does not have the length == 1")}e[0]=1-2*g-2*f;e[1]=2*(this.getX()*this.getY()-this.getZ()*this.getW());e[2]=2*(this.getX()*this.getZ()+this.getY()*this.getW());e[3]=2*(this.getX()*this.getY()+this.getZ()*this.getW());e[4]=1-2*h-2*f;e[5]=2*(this.getY()*this.getZ()-this.getX()*this.getW());e[6]=2*(this.getX()*this.getZ()-this.getY()*this.getW());e[7]=2*(this.getX()*this.getW()+this.getY()*this.getZ());e[8]=1-2*h-2*g;return e};this.setFromMatrix=function(e){var i={};var h=1+e[0]+e[4]+e[8];var g=undefined;var f=undefined;if(h>0.0001){g=Math.sqrt(h)*2;f=1/g;i.x=(e[7]-e[5])*f;i.y=(e[2]-e[6])*f;i.z=(e[3]-e[1])*f;i.w=g*0.25}else{if((e[0]>e[4])&&(e[0]>e[8])){g=Math.sqrt(1+e[0]-e[4]-e[8])*2;f=1/g;i.x=g*0.25;i.y=(e[1]+e[3])*f;i.z=(e[2]+e[6])*f;i.w=(e[7]-e[5])*f}else{if(e[4]>e[8]){g=Math.sqrt(1+e[4]-e[0]-e[8])*2;f=1/g;i.x=(e[1]+e[3])*f;i.y=g*0.25;i.z=(e[5]+e[7])*f;i.w=(e[2]-e[6])*f}else{g=Math.sqrt(1+e[8]-e[0]-e[4])*2;f=1/g;i.x=(e[2]+e[6])*f;i.y=(e[5]+e[7])*f;i.z=g*0.25;i.w=(e[3]-e[1])*f}}}f=1/Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z+i.w*i.w);this.setX(i.x*f);this.setY(i.y*f);this.setZ(i.z*f);this.setW(i.w*f)};this.inverse=function(){var g=this.getMatrix();var e=[];e[0]=g[0];e[1]=g[3];e[2]=g[6];e[3]=g[1];e[4]=g[4];e[5]=g[7];e[6]=g[2];e[7]=g[5];e[8]=g[8];var f=new arel.Rotation();f.setFromMatrix(e);return f};this.multiply=function(f){var e=new arel.Rotation();e.setW(this.getW()*f.getW()-this.getX()*f.getX()-this.getY()*f.getY()-this.getZ()*f.getZ());e.setX(this.getW()*f.getX()+this.getX()*f.getW()-this.getY()*f.getZ()+this.getZ()*f.getY());e.setY(this.getW()*f.getY()+this.getX()*f.getZ()+this.getY()*f.getW()-this.getZ()*f.getX());e.setZ(this.getW()*f.getZ()-this.getX()*f.getY()+this.getY()*f.getX()+this.getZ()*f.getW());return e};this.toParameterObject=function(){var e={};e.q1=this.getX();e.q2=this.getY();e.q3=this.getZ();e.q4=this.getW();return e};this.init(a,d,c,b)};arel.Rotation.rotate=function(l,j){var n=new arel.Vector3D();var b=l.toParameterObject();var m=b.q1*b.q2;var a=b.q1*b.q1;var i=b.q2*b.q2;var c=b.q3*b.q3;var k=b.q1*b.q3;var h=b.q2*b.q3;var g=b.q4*b.q4;var f=b.q4*b.q1;var e=b.q4*b.q2;var d=b.q4*b.q3;n.setX(j.getX()*(2*(a+g)-1)+j.getY()*2*(m-d)+j.getZ()*2*(e+k));n.setY(j.getX()*2*(m+d)+j.getY()*(2*(i+g)-1)+j.getZ()*2*(h-f));n.setZ(j.getX()*2*(k-e)+j.getY()*2*(f+h)+j.getZ()*(2*(c+g)-1));return n};arel.Vector4D=function(c,b,a,d){this.x=c;this.y=b;this.z=a;this.w=d;this.toString=function(){return this.x+","+this.y+","+this.z+","+this.w};this.toParameterObject=function(f){if(f===undefined){f=""}var e={};e[f+"X"]=this.getX();e[f+"Y"]=this.getY();e[f+"Z"]=this.getZ();e[f+"W"]=this.getW();return e};this.isNULL=function(){if(!this.getX()&&!this.getY()&&!this.getZ()&&!this.getW()){return true}if(this.getX()===0&&this.getY()===0&&this.getZ()===0){return true}};this.setX=function(e){this.x=e};this.setY=function(e){this.y=e};this.setZ=function(e){this.z=e};this.setW=function(e){this.w=e};this.getX=function(){return this.x};this.getY=function(){return this.y};this.getZ=function(){return this.z};this.getW=function(){return this.w}};arel.LLA=function(d,a,c,b){this.accuracy=undefined;this.init=function(h,e,g,f){if(h!==undefined){this.setLatitude(h)}if(e!==undefined){this.setLongitude(e)}if(g!==undefined){this.setAltitude(g)}if(f!==undefined){this.accuracy=f}};this.setLatitude=function(e){this.setX(e)};this.getLatitude=function(){return this.getX()};this.setLongitude=function(e){this.setY(e)};this.getLongitude=function(){return this.getY()};this.setAltitude=function(e){this.setZ(e)};this.getAltitude=function(){return this.getZ()};this.getAccuracy=function(){return this.accuracy};this.setAccuracy=function(e){this.accuracy=e};this.toParameterObject=function(){var e={};e.lat=this.getLatitude();e.lng=this.getLongitude();e.alt=this.getAltitude();return e};this.init(d,a,c,b)};arel.MovieTextureStatus=function(b,a){this.init=function(d,c){this.status=d;this.positionInSeconds=c};this.getStatus=function(){return this.status};this.getPositionInSeconds=function(){return this.positionInSeconds};this.init(b,a)};arel.AnimationKeyFrame=function(a,d,b,c){this.init=function(e,f,h,g){this.index=e;this.rotation=f;this.translation=h;this.scale=g};this.init(a,b,d,c)};arel.CustomAnimation=function(){this.init=function(){this.keyframes=new Array();this.interpolationType="EIT_LINEAR"};this.addKeyFrame=function(a){this.keyframes.push(a)};this.init()};arel.TrackingValues=function(b,a,m,f,e,d,c,h,k,i,g,j,l){this.translation=new arel.Vector3D(b,a,m);this.rotation=new arel.Rotation(f,e,d,c);this.coordinateSystemID=k;this.quality=h;this.type=i;this.state=g;this.content=j;this.coordinateSystemName=l;this.getState=function(){return this.state};this.setTranslation=function(n){this.translation=new arel.Vector3D(n.getX(),n.getY(),n.getZ())};this.setRotation=function(n){this.rotation=n};this.getTranslation=function(){return this.translation};this.getRotation=function(){return this.rotation};this.getQuality=function(){return this.quality};this.getCoordinateSystemID=function(){return this.coordinateSystemID};this.getCoordinateSystemName=function(){return this.coordinateSystemName};this.getType=function(){return this.type};this.getContent=function(){return this.content}};arel.VisualSearchResult=function(b,a){this.identifier=b;this.metadata=a;this.toString=function(){return this.identifier};this.getMetadata=function(){return this.metadata}};arel.Vector2D=function(b,a){this.x=b;this.y=a;this.setX=function(c){this.x=c};this.getX=function(){return this.x};this.setY=function(c){this.y=c};this.getY=function(){return this.y};this.toJSONObject=function(){return{x:this.x,y:this.y}};this.toString=function(){return this.x+","+this.y};this.toParameterObject=function(d){if(d===undefined){d=""}var c={};c[d+"X"]=this.getX();c[d+"Y"]=this.getY();return c};this.isNULL=function(){if(!this.getX()&&!this.getY()){return true}if(this.getX()===0&&this.getY()===0){return true}}};arel.Image=function(d,a,c,b){this.imagebuffer=undefined;this.width=undefined;this.height=undefined;this.originUpperLeft=undefined;this.init=function(f,g,e,h){if(f!==undefined){this.imagebuffer=f}if(g!==undefined){this.width=g}if(e!==undefined){this.height=e}if(h!==undefined){this.originUpperLeft=h}};this.setImageBuffer=function(e){this.imagebuffer=e};this.getImageBuffer=function(){return this.imagebuffer};this.setWidth=function(e){this.width=e};this.getWidth=function(){return this.width};this.setHeight=function(e){this.height=e};this.getHeight=function(){return this.height};this.setOriginUpperLeft=function(e){this.originUpperLeft=e};this.isOriginUpperLeft=function(){return this.originUpperLeft};this.toParameterObject=function(f){if(f===undefined){f=""}var e={};e[f+"imagedata"]=this.getImageBuffer();return e};this.init(d,a,c,b)};arel.LLA.prototype=new arel.Vector3D;arel.LLA.prototype.constructor=arel.LLA;arel.LLA.prototype.parent=arel.Vector3D.prototype;arel.Rotation.prototype=new arel.Vector4D;arel.Rotation.prototype.constructor=arel.Rotation;arel.Rotation.prototype.parent=arel.Vector4D.prototype;arel.BeaconService={addCallbackHandler:function(f,e,a,d,b,c){return arel.BeaconService.addCallbackHandlerMajorAndMinorFilter(f,e,-1,-1,a,d,b,c)},addCallbackHandlerMajorFilter:function(g,f,d,a,e,b,c){return arel.BeaconService.addCallbackHandlerMajorAndMinorFilter(g,f,d,-1,a,e,b,c)},addCallbackHandlerMajorAndMinorFilter:function(d,a,k,f,h,j,g,e){if(d===undefined){return arel.Error.write("No identifier provided")}if(a===undefined){return arel.Error.write("No proximityUUID provided")}if(h===undefined&&j===undefined&&g===undefined){return arel.Error.write("No callback provided")}var b=arel.CallbackInterface.addCallbackFunction(h,e);var c=arel.CallbackInterface.addCallbackFunction(j,e);var i=arel.CallbackInterface.addCallbackFunction(g,e);console.log("calling client interface beacon manager");return arel.ClientInterface.beacon.addCallbackHandler(encodeURI(d),encodeURI(a),k,f,b,c,i)},removeCallbackHandler:function(a){if(a===undefined){return arel.Error.write("No identifier provided")}return arel.ClientInterface.beacon.removeCallbackHandler(encodeURI(a))},isBeaconSupported:function(a,c){if(a===undefined){return arel.Error.write("No callback provided")}var b=arel.CallbackInterface.addCallbackFunction(a,c);console.log("Calling isBeaconSupported");return arel.ClientInterface.beacon.isBeaconSupported(b)}};arel.Object.POI=function(){this.TYPE=arel.Config.OBJECT_POI;this.getType=function(){return this.TYPE};this.init=function(){this.visibility={}};this.init()};arel.Object.POI.prototype=new arel.Object;arel.Object.POI.prototype.constructor=arel.Object.POI;arel.Object.POI.prototype.parent=arel.Object.prototype;arel.Object.Model3D=function(b,c,a){this.TYPE=arel.Config.OBJECT_MODEL3D;this.onscreen=undefined;this.translation=new arel.Vector3D(0,0,0);this.rotation=new arel.Rotation(0,0,0);this.scale=new arel.Vector3D(1,1,1);this.occlusion=false;this.model=undefined;this.texture=undefined;this.movie=undefined;this.coordinateSystemID=undefined;this.transparency=0;this.renderorderposition=undefined;this.screenanchor=undefined;this.screenanchorflags=undefined;this.pickable=true;this.animationSpeed=25;this.billboardModeEnabled=undefined;this.renderOptions=undefined;this.init=function(e,f,d){if(e!==undefined){this.id=e}if(f!==undefined){this.model=f}if(d!==undefined){this.texture=d}this.visibility={}};this.setBillboardModeEnabled=function(d){this.billboardModeEnabled=!!d;return arel.Scene.updateObject(this.id,"BillboardModeEnabled",this.billboardModeEnabled,arel.Util.toParameter({enable:this.billboardModeEnabled},true))};this.isBillboardModeEnabled=function(){return this.billboardModeEnabled};this.setRenderOption=function(d,e){if(this.renderOptions===undefined){this.renderOptions={}}this.renderOptions[d]=e;return arel.Scene.updateObject(this.id,"RenderOption",[d,e],arel.Util.toParameter({param:JSON.stringify([d,e])},true),true)};this.setScreenCoordinates=function(e){this.onscreen=e;var d=this.onscreen.toParameterObject("onScreen");return arel.Scene.updateObject(this.id,"ScreenCoordinates",e,arel.Util.toParameter(d,true))};this.getScreenCoordinates=function(){return this.onscreen};this.setTranslation=function(d){if(!(d instanceof arel.Vector3D)){return arel.Error.write("_translation must be of type arel.Vector3D")}this.translation=d;var e=this.translation.toParameterObject("trans");return arel.Scene.updateObject(this.id,"Translation",d,arel.Util.toParameter(e,true))};this.getTranslation=function(){return this.translation};this.setRotation=function(d){if(!(d instanceof arel.Rotation)){return arel.Error.write("_rotation must be of type arel.Rotation")}this.rotation=d;var e=this.rotation.toParameterObject("rot");return arel.Scene.updateObject(this.id,"Rotation",d,arel.Util.toParameter(e,true))};this.getRotation=function(){return this.rotation};this.setScale=function(d){if(!(d instanceof arel.Vector3D)){return arel.Error.write("_scale must be of type arel.Vector3D")}this.scale=d;var e=this.scale.toParameterObject("scale");return arel.Scene.updateObject(this.id,"Scale",d,arel.Util.toParameter(e,true))};this.getScale=function(){return this.scale};this.setOccluding=function(d){this.occlusion=d;return arel.Scene.updateObject(this.id,"Occluding",d,arel.Util.toParameter({value:d},true))};this.isOccluding=function(){return this.occlusion};this.getModel=function(){return this.model};this.setModel=function(d){this.model=d;return arel.Scene.updateObject(this.id,"Model",d,arel.Util.toParameter({value:d},true))};this.getTexture=function(){return this.texture};this.setTexture=function(d,e){this.texture=d;if(e===undefined){return arel.Scene.updateObject(this.id,"Texture",d,arel.Util.toParameter({value:d},true))}else{return arel.Scene.updateObject(this.id,"Texture",d,arel.Util.toParameter({value:d},true)+arel.Util.toParameter(e.toParameterObject(),true))}};this.getMovie=function(){return this.movie};this.setMovie=function(d){this.movie=d;return arel.Scene.updateObject(this.id,"Movie",d,arel.Util.toParameter({value:d},true))};this.getCoordinateSystemID=function(){return this.coordinateSystemID};this.setCoordinateSystemID=function(d){this.coordinateSystemID=d;return arel.Scene.updateObject(this.id,"CoordinateSystemID",d,arel.Util.toParameter({value:d},true))};this.startAnimation=function(e,d){if((typeof e==="number"&&typeof d==="number")||arguments.length>2){return arel.Error.write("Invalid arguments for startAnimation - did you mean startAnimationRange?")}var f={id:this.id,animationname:e};if(d!==undefined){f.loop=d}return arel.ClientInterface.object.startAnimation(this.id,arel.Util.toParameter(f))};this.startAnimationRange=function(e,f,d){return arel.ClientInterface.object.startAnimationRange(this.id,e,f,d)};this.pauseAnimation=function(){var d={id:this.id};return arel.ClientInterface.object.pauseAnimation(this.id,arel.Util.toParameter(d))};this.stopAnimation=function(){var d={id:this.id};return arel.ClientInterface.object.stopAnimation(this.id,arel.Util.toParameter(d))};this.setAnimationSpeed=function(d){this.animationSpeed=d;return arel.Scene.updateObject(this.id,"AnimationSpeed",d,arel.Util.toParameter({value:d},true))};this.getAnimationSpeed=function(){return this.animationSpeed};this.startMovieTexture=function(d){if(d===undefined){d=false}var e={id:this.id,loop:d};return arel.ClientInterface.object.startMovieTexture(this.id,arel.Util.toParameter(e))};this.pauseMovieTexture=function(){var d={id:this.id};return arel.ClientInterface.object.pauseMovieTexture(this.id,arel.Util.toParameter(d))};this.getMovieTextureStatus=function(f,d){var e=arel.CallbackInterface.addCallbackFunction(f,d);if(!e){return arel.Error.write("invalid callback given")}return arel.ClientInterface.object.getMovieTextureStatus(arel.Util.toParameter({id:this.id,callbackid:e}))};this.stopMovieTexture=function(){var d={id:this.id};return arel.ClientInterface.object.stopMovieTexture(this.id,arel.Util.toParameter(d))};this.setTransparency=function(d){this.transparency=d;return arel.Scene.updateObject(this.id,"Transparency",d,arel.Util.toParameter({value:d},true))};this.getTransparency=function(){return this.transparency};this.setRenderOrderPosition=function(f,e,d){this.renderorderposition=f;e=typeof e!=="undefined"?e:false;d=typeof d!=="undefined"?d:false;return arel.Scene.updateObject(this.id,"RenderOrderPosition",f,arel.Util.toParameter({value:f,disabledepth:e,cleardepth:d},true))};this.getRenderOrderPosition=function(){return this.renderorderposition};this.getAnimationNames=function(h,d){var f=arel.CallbackInterface.addCallbackFunction(h);if(!f){return arel.Error.write("invalid callback given")}var g=arel.Util.toParameter({id:this.id,animType:d,callbackid:f});var e=arel.ClientInterface.protocol+"object/getAnimationNames/"+g;return arel.ClientInterface.handleObjectRequest(this.id,e)};this.getCurrentFrame=function(d,g,e){if(typeof d==="function"){e=g;g=d;d=undefined}var f=arel.CallbackInterface.addCallbackFunction(g,e);if(!f){return arel.Error.write("Invalid callback given")}return arel.ClientInterface.object.getCurrentFrame(this.id,d,f)};this.getCustomAnimation=function(e,h,d){var g=function(o){var m=new arel.CustomAnimation();for(var k=0;k<o.keyframes.length;++k){var l=o.keyframes[k].translation;var p=new arel.Vector3D(l.x,l.y,l.z);l=o.keyframes[k].scale;var n=new arel.Vector3D(l.x,l.y,l.z);l=o.keyframes[k].rotation;var j=new arel.Rotation(l.x,l.y,l.z,l.w);m.addKeyFrame(new arel.AnimationKeyFrame(o.keyframes[k].index,p,j,n))}return h.call(this,m)};var f=arel.CallbackInterface.addCallbackFunction(g,d);if(!f){return arel.Error.write("Invalid callback given")}return arel.ClientInterface.object.getCustomAnimation(this.id,e,f)};this.setCurrentFrame=function(e,d){return arel.ClientInterface.object.setCurrentFrame(this.id,e,d)};this.setCustomAnimation=function(f,e){var g=arel.Util.toParameter({id:this.id,name:f});g=g+"&animation="+encodeURIComponent(JSON.stringify(e));var d=arel.ClientInterface.protocol+"object/setCustomAnimation/"+g;return arel.ClientInterface.handleObjectRequest(this.id,d)};this.removeCustomAnimation=function(e){var f=arel.Util.toParameter({id:this.id,name:e});var d=arel.ClientInterface.protocol+"object/removeCustomAnimation/"+f;return arel.ClientInterface.handleObjectRequest(this.id,d)};this.setScreenAnchor=function(d,e){this.screenanchor=d;if(e===undefined){this.screenanchorflags=arel.Constants.FLAG_IGNORE_SCREEN_RESOLUTION}else{this.screenanchorflags=e}if(arel.ObjectCache.objectExists(this.id)){return arel.ClientInterface.object.edit(this.id,"ScreenAnchor",arel.Util.toParameter({value:this.screenanchor,flags:this.screenanchorflags},true))}return false};this.getScreenAnchor=function(){return this.screenanchor};this.getScreenAnchorFlags=function(){return this.screenanchorflags};this.setPickingEnabled=function(d){this.pickable=d;return arel.Scene.updateObject(this.id,"PickingEnabled",d,arel.Util.toParameter({value:d},true))};this.isPickingEnabled=function(){return this.pickable};this.getType=function(){return this.TYPE};this.setType=function(d){this.TYPE=d};this.init(b,c,a)};arel.Object.Model3D.prototype=new arel.Object;arel.Object.Model3D.prototype.constructor=arel.Object.Model3D;arel.Object.Model3D.prototype.parent=arel.Object.prototype;arel.Object.Model3D.create=function(b,c,a){return new arel.Object.Model3D(b,c,a)};arel.Object.Model3D.createFromImage=function(c,a){var b=new arel.Object.Model3D(c,undefined,a);b.setType(arel.Config.OBJECT_IMAGE3D);return b};arel.Object.Model3D.createFromArelImage=function(c,b){var a=new arel.Object.Model3D(c);a.setType(arel.Config.OBJECT_IMAGE3D);a.imagedata=b.getImageBuffer();return a};arel.Object.Model3D.createFromMovie=function(a,c){var b=new arel.Object.Model3D(a);b.setType(arel.Config.OBJECT_MOVIE3D);b.setMovie(c);return b};arel.Object.Light=function(a){this.TYPE=arel.Config.OBJECT_LIGHT;this.ambientColor=undefined;this.attenuation=undefined;this.coordinateSystemID=0;this.diffuseColor=undefined;this.direction=undefined;this.enabled=undefined;this.radius=undefined;this.translation=undefined;this.lightType=undefined;this.init=function(b){if(b!==undefined){this.id=b}this.visibility={}};this.getAmbientColor=function(){return this.ambientColor};this.setAmbientColor=function(b){if(!(b instanceof arel.Vector3D)){return arel.Error.write("_ambientColor must be of type arel.Vector3D")}this.ambientColor=b;var c=this.ambientColor.toParameterObject("ambientcolor");return arel.Scene.updateObject(this.id,"AmbientColor",b,arel.Util.toParameter(c,true))};this.getAttenuation=function(){return this.attenuation};this.setAttenuation=function(c){if(!(c instanceof arel.Vector3D)){return arel.Error.write("_attenuation must be of type arel.Vector3D")}this.attenuation=c;var b=this.attenuation.toParameterObject("attenuation");return arel.Scene.updateObject(this.id,"Attenuation",c,arel.Util.toParameter(b,true))};this.getCoordinateSystemID=function(){return this.coordinateSystemID};this.setCoordinateSystemID=function(b){this.coordinateSystemID=b;return arel.Scene.updateObject(this.id,"CoordinateSystemID",b,arel.Util.toParameter({value:b},true))};this.getDiffuseColor=function(){return this.diffuseColor};this.setDiffuseColor=function(b){if(!(b instanceof arel.Vector3D)){return arel.Error.write("_diffuseColor must be of type arel.Vector3D")}this.diffuseColor=b;var c=this.diffuseColor.toParameterObject("diffusecolor");return arel.Scene.updateObject(this.id,"DiffuseColor",b,arel.Util.toParameter(c,true))};this.getDirection=function(){return this.direction};this.setDirection=function(b){if(!(b instanceof arel.Vector3D)){return arel.Error.write("_direction must be of type arel.Vector3D")}this.direction=b;var c=this.direction.toParameterObject("direction");return arel.Scene.updateObject(this.id,"Direction",b,arel.Util.toParameter(c,true))};this.isEnabled=function(){return this.enabled};this.setEnabled=function(b){b=!!b;this.enabled=b;return arel.Scene.updateObject(this.id,"Enabled",b,arel.Util.toParameter({value:b},true))};this.getLightType=function(){return this.lightType};this.setLightType=function(b){if(b!=arel.Light.LIGHT_TYPE_DIRECTIONAL&&b!=arel.Light.LIGHT_TYPE_POINT&&b!=arel.Light.LIGHT_TYPE_SPOT){return arel.Error.write("Invalid enum value for _lightType")}this.lightType=b;return arel.Scene.updateObject(this.id,"LightType",b,arel.Util.toParameter({value:b},true))};this.getRadius=function(){return this.radius};this.setRadiusDegrees=function(b){this.radius=b*Math.PI/180;return arel.Scene.updateObject(this.id,"Radius",b,arel.Util.toParameter({value:b},true))};this.setRadiusRadians=function(b){this.radius=b;return arel.Scene.updateObject(this.id,"Radius",b,arel.Util.toParameter({value:b},true))};this.getTranslation=function(){return this.translation};this.setTranslation=function(b){if(!(b instanceof arel.Vector3D)){return arel.Error.write("_translation must be of type arel.Vector3D")}this.translation=b;var c=this.translation.toParameterObject("trans");return arel.Scene.updateObject(this.id,"Translation",b,arel.Util.toParameter(c,true))};this.getType=function(){return this.TYPE};this.setType=function(b){if(b==arel.Light.LIGHT_TYPE_DIRECTIONAL||b==arel.Light.LIGHT_TYPE_POINT||b==arel.Light.LIGHT_TYPE_SPOT){return arel.Error.write("Use setLightType, not setType!")}this.TYPE=b};this.init(a)};arel.Object.Light.prototype=new arel.Object;arel.Object.Light.prototype.constructor=arel.Object.Light;arel.Object.Light.prototype.parent=arel.Object.prototype;arel.Object.Light.createLight=function(a){return new arel.Object.Light(a)};arel.Media={CATEGORY:arel.Config.MEDIA_CATEGORY,WEBSITE:"website",SOUND:"sound",VIDEO:"video",ACTION_OPEN:"open",ACTION_PLAY:"play",ACTION_CLOSE:"stop",ACTION_PAUSE:"pause",openWebsite:function(a,b){if(!b||b==="false"){b="false"}else{b="true"}return this.handleMedia(this.WEBSITE,a,this.ACTION_OPEN,b)},speak:function(a){arel.Debug.checkCompatibility(16,"arel.Media.speak");return arel.ClientInterface.media.speak(a)},startSound:function(a){return this.handleMedia(this.SOUND,a,this.ACTION_PLAY,undefined)},pauseSound:function(a){return this.handleMedia(this.SOUND,a,this.ACTION_PAUSE,undefined)},stopSound:function(a){return this.handleMedia(this.SOUND,a,this.ACTION_CLOSE,undefined)},startVideo:function(a){return this.handleMedia(this.VIDEO,a,this.ACTION_PLAY)},triggerVibration:function(){return arel.ClientInterface.media.vibrate()},playAlert:function(){return arel.ClientInterface.media.playAlert()},createCalendarEvent:function(b,e,c,a,d){return arel.ClientInterface.media.createCalendarEvent(b.getTime()/1000,e.getTime()/1000,encodeURIComponent(c),encodeURIComponent(a),encodeURIComponent(d))},handleMedia:function(b,c,a,e){var d=[];if(c){d.url=c}if(e){d.external=e}if(a){d.action=a}if(b===this.WEBSITE){return arel.ClientInterface.media.website(arel.Util.toParameter(d))}else{if(b===this.VIDEO){return arel.ClientInterface.media.video(arel.Util.toParameter(d))}else{if(b===this.IMAGE){return arel.ClientInterface.media.image(arel.Util.toParameter(d))}else{if(b===this.SOUND){return arel.ClientInterface.media.sound(arel.Util.toParameter(d))}else{return arel.Error.write("Invalid media type")}}}}}};arel.Navigation={routeToObjectOnMap:function(a){var b=[];if(a instanceof arel.Object){b.id=a.getID()}else{b.id=a}if(arel.ObjectCache.objectExists(b.id)){return arel.ClientInterface.navigate.routeOnMap(arel.Util.toParameter(b))}else{return arel.Error.write("Invalid location given")}},routeToLocationOnMap:function(b,a){var c=[];if(arel.Parser.validateLatitude(b)&&arel.Parser.validateLongitude(a)){c.lat=b;c.lng=a;return arel.ClientInterface.navigate.routeOnMap(arel.Util.toParameter(c))}else{return arel.Error.write("Invalid location given")}}};arel.CallbackInterface={callbackHandler:{},addCallbackFunction:function(c,a){if(c&&typeof(c)==="function"){var b=String(new Date().valueOf())+"_"+arel.callbackMethodIterator;arel.callbackMethodIterator++;this.callbackHandler[b]=[c,a];return b}else{return arel.Error.write("callback needs to be specified.")}},removeCallbackFunction:function(a){if(this.callbackHandler[a]===undefined){return arel.Error.write("callback id not specified.")}delete (this.callbackHandler[a]);return true},callCallbackFunction:function(c,b){var a=this.callCallbackFunctionWithoutRemoving(c,b);if(a==true){return this.removeCallbackFunction(c)}else{return a}},callCallbackFunctionWithoutRemoving:function(f,d){try{var a=this.callbackHandler[f];if(a===undefined){return arel.Error.write("Callbackinformation not found.")}if(a[0]===undefined||typeof(a[0])!=="function"){return arel.Error.write("Callback function undefined or not a function.")}var b=[];for(var c=1;c<arguments.length;++c){b.push(arguments[c])}if(a[1]!==undefined){a[0].apply(a[1],b)}else{a[0].apply(null,b)}arel.Debug.logStream("Incoming callback information from renderer.")}catch(g){return arel.Error.write("Error calling callback."+g)}return true}};if(!arelTEST){if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);arel.readyforexecution()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);arel.readyforexecution()}}}}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",arel.readyforexecution,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",arel.readyforexecution)}}}else{arel.readyforexecution()};